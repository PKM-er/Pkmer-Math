import{F as xt}from"./chunk-PWCSEZZ4-Ct2lkXZg.js";import{s as Ht}from"./chunk-VSLJSFIP-DgA01tnO.js";import{c as Vt}from"./chunk-4KE642ED-Bu9La8ZB.js";import{p as Bt}from"./gitGraph-YCYPL57B-MEVJTYR7-0by1ORrg.js";import{m as T,v as Wt,S as jt,k as $t,T as qt,B as Zt,w as Jt,aT as Kt,b5 as Qt,g as er,t as Mt,bb as mt,W as lt,bm as ft,r as tr,au as rr,q as ir,aS as yt,bn as nr,bo as or}from"./mermaid.esm.min-DJ0KOtfj.js";import"./chunk-5ZJXQJOJ-fEDlR3dB.js";import"./app-B2wql9lh.js";var _t=yt((w,H)=>{T(function(C,G){typeof w=="object"&&typeof H=="object"?H.exports=G():typeof define=="function"&&define.amd?define([],G):typeof w=="object"?w.layoutBase=G():C.layoutBase=G()},"webpackUniversalModuleDefinition")(w,function(){return function(C){var G={};function A(u){if(G[u])return G[u].exports;var s=G[u]={i:u,l:!1,exports:{}};return C[u].call(s.exports,s,s.exports,A),s.l=!0,s.exports}return T(A,"__webpack_require__"),A.m=C,A.c=G,A.i=function(u){return u},A.d=function(u,s,i){A.o(u,s)||Object.defineProperty(u,s,{configurable:!1,enumerable:!0,get:i})},A.n=function(u){var s=u&&u.__esModule?T(function(){return u.default},"getDefault"):T(function(){return u},"getModuleExports");return A.d(s,"a",s),s},A.o=function(u,s){return Object.prototype.hasOwnProperty.call(u,s)},A.p="",A(A.s=28)}([function(C,G,A){function u(){}T(u,"LayoutConstants"),u.QUALITY=1,u.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,u.DEFAULT_INCREMENTAL=!1,u.DEFAULT_ANIMATION_ON_LAYOUT=!0,u.DEFAULT_ANIMATION_DURING_LAYOUT=!1,u.DEFAULT_ANIMATION_PERIOD=50,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,u.DEFAULT_GRAPH_MARGIN=15,u.NODE_DIMENSIONS_INCLUDE_LABELS=!1,u.SIMPLE_NODE_SIZE=40,u.SIMPLE_NODE_HALF_SIZE=u.SIMPLE_NODE_SIZE/2,u.EMPTY_COMPOUND_NODE_SIZE=40,u.MIN_EDGE_LENGTH=1,u.WORLD_BOUNDARY=1e6,u.INITIAL_WORLD_BOUNDARY=u.WORLD_BOUNDARY/1e3,u.WORLD_CENTER_X=1200,u.WORLD_CENTER_Y=900,C.exports=u},function(C,G,A){var u=A(2),s=A(8),i=A(9);function r(h,n,m){u.call(this,m),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=m,this.bendpoints=[],this.source=h,this.target=n}T(r,"LEdge"),r.prototype=Object.create(u.prototype);for(var e in u)r[e]=u[e];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(h,n){for(var m=this.getOtherEnd(h),o=n.getGraphManager().getRoot();;){if(m.getOwner()==n)return m;if(m.getOwner()==o)break;m=m.getOwner().getParent()}return null},r.prototype.updateLength=function(){var h=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=i.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=i.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=i.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=i.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},C.exports=r},function(C,G,A){function u(s){this.vGraphObject=s}T(u,"LGraphObject"),C.exports=u},function(C,G,A){var u=A(2),s=A(10),i=A(13),r=A(0),e=A(16),h=A(5);function n(o,t,d,f){d==null&&f==null&&(f=t),u.call(this,f),o.graphManager!=null&&(o=o.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=f,this.edges=[],this.graphManager=o,d!=null&&t!=null?this.rect=new i(t.x,t.y,d.width,d.height):this.rect=new i}T(n,"LNode"),n.prototype=Object.create(u.prototype);for(var m in u)n[m]=u[m];n.prototype.getEdges=function(){return this.edges},n.prototype.getChild=function(){return this.child},n.prototype.getOwner=function(){return this.owner},n.prototype.getWidth=function(){return this.rect.width},n.prototype.setWidth=function(o){this.rect.width=o},n.prototype.getHeight=function(){return this.rect.height},n.prototype.setHeight=function(o){this.rect.height=o},n.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},n.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},n.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},n.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},n.prototype.getRect=function(){return this.rect},n.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},n.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},n.prototype.setRect=function(o,t){this.rect.x=o.x,this.rect.y=o.y,this.rect.width=t.width,this.rect.height=t.height},n.prototype.setCenter=function(o,t){this.rect.x=o-this.rect.width/2,this.rect.y=t-this.rect.height/2},n.prototype.setLocation=function(o,t){this.rect.x=o,this.rect.y=t},n.prototype.moveBy=function(o,t){this.rect.x+=o,this.rect.y+=t},n.prototype.getEdgeListToNode=function(o){var t=[],d=this;return d.edges.forEach(function(f){if(f.target==o){if(f.source!=d)throw"Incorrect edge source!";t.push(f)}}),t},n.prototype.getEdgesBetween=function(o){var t=[],d=this;return d.edges.forEach(function(f){if(!(f.source==d||f.target==d))throw"Incorrect edge source and/or target";(f.target==o||f.source==o)&&t.push(f)}),t},n.prototype.getNeighborsList=function(){var o=new Set,t=this;return t.edges.forEach(function(d){if(d.source==t)o.add(d.target);else{if(d.target!=t)throw"Incorrect incidency!";o.add(d.source)}}),o},n.prototype.withChildren=function(){var o=new Set,t,d;if(o.add(this),this.child!=null)for(var f=this.child.getNodes(),l=0;l<f.length;l++)t=f[l],d=t.withChildren(),d.forEach(function(N){o.add(N)});return o},n.prototype.getNoOfChildren=function(){var o=0,t;if(this.child==null)o=1;else for(var d=this.child.getNodes(),f=0;f<d.length;f++)t=d[f],o+=t.getNoOfChildren();return o==0&&(o=1),o},n.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},n.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},n.prototype.scatter=function(){var o,t,d=-r.INITIAL_WORLD_BOUNDARY,f=r.INITIAL_WORLD_BOUNDARY;o=r.WORLD_CENTER_X+e.nextDouble()*(f-d)+d;var l=-r.INITIAL_WORLD_BOUNDARY,N=r.INITIAL_WORLD_BOUNDARY;t=r.WORLD_CENTER_Y+e.nextDouble()*(N-l)+l,this.rect.x=o,this.rect.y=t},n.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var o=this.getChild();if(o.updateBounds(!0),this.rect.x=o.getLeft(),this.rect.y=o.getTop(),this.setWidth(o.getRight()-o.getLeft()),this.setHeight(o.getBottom()-o.getTop()),r.NODE_DIMENSIONS_INCLUDE_LABELS){var t=o.getRight()-o.getLeft(),d=o.getBottom()-o.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(t+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>t?(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(t+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(d+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>d?(this.rect.y-=(this.labelHeight-d)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(d+this.labelHeight))}}},n.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},n.prototype.transform=function(o){var t=this.rect.x;t>r.WORLD_BOUNDARY?t=r.WORLD_BOUNDARY:t<-r.WORLD_BOUNDARY&&(t=-r.WORLD_BOUNDARY);var d=this.rect.y;d>r.WORLD_BOUNDARY?d=r.WORLD_BOUNDARY:d<-r.WORLD_BOUNDARY&&(d=-r.WORLD_BOUNDARY);var f=new h(t,d),l=o.inverseTransformPoint(f);this.setLocation(l.x,l.y)},n.prototype.getLeft=function(){return this.rect.x},n.prototype.getRight=function(){return this.rect.x+this.rect.width},n.prototype.getTop=function(){return this.rect.y},n.prototype.getBottom=function(){return this.rect.y+this.rect.height},n.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},C.exports=n},function(C,G,A){var u=A(0);function s(){}T(s,"FDLayoutConstants");for(var i in u)s[i]=u[i];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,C.exports=s},function(C,G,A){function u(s,i){s==null&&i==null?(this.x=0,this.y=0):(this.x=s,this.y=i)}T(u,"PointD"),u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.setX=function(s){this.x=s},u.prototype.setY=function(s){this.y=s},u.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},u.prototype.getCopy=function(){return new u(this.x,this.y)},u.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},C.exports=u},function(C,G,A){var u=A(2),s=A(10),i=A(0),r=A(7),e=A(3),h=A(1),n=A(13),m=A(12),o=A(11);function t(f,l,N){u.call(this,N),this.estimatedSize=s.MIN_VALUE,this.margin=i.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=f,l!=null&&l instanceof r?this.graphManager=l:l!=null&&l instanceof Layout&&(this.graphManager=l.graphManager)}T(t,"LGraph"),t.prototype=Object.create(u.prototype);for(var d in u)t[d]=u[d];t.prototype.getNodes=function(){return this.nodes},t.prototype.getEdges=function(){return this.edges},t.prototype.getGraphManager=function(){return this.graphManager},t.prototype.getParent=function(){return this.parent},t.prototype.getLeft=function(){return this.left},t.prototype.getRight=function(){return this.right},t.prototype.getTop=function(){return this.top},t.prototype.getBottom=function(){return this.bottom},t.prototype.isConnected=function(){return this.isConnected},t.prototype.add=function(f,l,N){if(l==null&&N==null){var c=f;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(c)>-1)throw"Node already in graph!";return c.owner=this,this.getNodes().push(c),c}else{var E=f;if(!(this.getNodes().indexOf(l)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(!(l.owner==N.owner&&l.owner==this))throw"Both owners must be this graph!";return l.owner!=N.owner?null:(E.source=l,E.target=N,E.isInterGraph=!1,this.getEdges().push(E),l.edges.push(E),N!=l&&N.edges.push(E),E)}},t.prototype.remove=function(f){var l=f;if(f instanceof e){if(l==null)throw"Node is null!";if(!(l.owner!=null&&l.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=l.edges.slice(),c,E=N.length,_=0;_<E;_++)c=N[_],c.isInterGraph?this.graphManager.remove(c):c.source.owner.remove(c);var L=this.nodes.indexOf(l);if(L==-1)throw"Node not in owner node list!";this.nodes.splice(L,1)}else if(f instanceof h){var c=f;if(c==null)throw"Edge is null!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.owner!=null&&c.target.owner!=null&&c.source.owner==this&&c.target.owner==this))throw"Source and/or target owner is invalid!";var X=c.source.edges.indexOf(c),z=c.target.edges.indexOf(c);if(!(X>-1&&z>-1))throw"Source and/or target doesn't know this edge!";c.source.edges.splice(X,1),c.target!=c.source&&c.target.edges.splice(z,1);var L=c.source.owner.getEdges().indexOf(c);if(L==-1)throw"Not in owner's edge list!";c.source.owner.getEdges().splice(L,1)}},t.prototype.updateLeftTop=function(){for(var f=s.MAX_VALUE,l=s.MAX_VALUE,N,c,E,_=this.getNodes(),L=_.length,X=0;X<L;X++){var z=_[X];N=z.getTop(),c=z.getLeft(),f>N&&(f=N),l>c&&(l=c)}return f==s.MAX_VALUE?null:(_[0].getParent().paddingLeft!=null?E=_[0].getParent().paddingLeft:E=this.margin,this.left=l-E,this.top=f-E,new m(this.left,this.top))},t.prototype.updateBounds=function(f){for(var l=s.MAX_VALUE,N=-s.MAX_VALUE,c=s.MAX_VALUE,E=-s.MAX_VALUE,_,L,X,z,V,B=this.nodes,q=B.length,x=0;x<q;x++){var ne=B[x];f&&ne.child!=null&&ne.updateBounds(),_=ne.getLeft(),L=ne.getRight(),X=ne.getTop(),z=ne.getBottom(),l>_&&(l=_),N<L&&(N=L),c>X&&(c=X),E<z&&(E=z)}var a=new n(l,c,N-l,E-c);l==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),B[0].getParent().paddingLeft!=null?V=B[0].getParent().paddingLeft:V=this.margin,this.left=a.x-V,this.right=a.x+a.width+V,this.top=a.y-V,this.bottom=a.y+a.height+V},t.calculateBounds=function(f){for(var l=s.MAX_VALUE,N=-s.MAX_VALUE,c=s.MAX_VALUE,E=-s.MAX_VALUE,_,L,X,z,V=f.length,B=0;B<V;B++){var q=f[B];_=q.getLeft(),L=q.getRight(),X=q.getTop(),z=q.getBottom(),l>_&&(l=_),N<L&&(N=L),c>X&&(c=X),E<z&&(E=z)}var x=new n(l,c,N-l,E-c);return x},t.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},t.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},t.prototype.calcEstimatedSize=function(){for(var f=0,l=this.nodes,N=l.length,c=0;c<N;c++){var E=l[c];f+=E.calcEstimatedSize()}return f==0?this.estimatedSize=i.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=f/Math.sqrt(this.nodes.length),this.estimatedSize},t.prototype.updateConnected=function(){var f=this;if(this.nodes.length==0){this.isConnected=!0;return}var l=new o,N=new Set,c=this.nodes[0],E,_,L=c.withChildren();for(L.forEach(function(x){l.push(x),N.add(x)});l.length!==0;){c=l.shift(),E=c.getEdges();for(var X=E.length,z=0;z<X;z++){var V=E[z];if(_=V.getOtherEndInGraph(c,this),_!=null&&!N.has(_)){var B=_.withChildren();B.forEach(function(x){l.push(x),N.add(x)})}}}if(this.isConnected=!1,N.size>=this.nodes.length){var q=0;N.forEach(function(x){x.owner==f&&q++}),q==this.nodes.length&&(this.isConnected=!0)}},C.exports=t},function(C,G,A){var u,s=A(1);function i(r){u=A(6),this.layout=r,this.graphs=[],this.edges=[]}T(i,"LGraphManager"),i.prototype.addRoot=function(){var r=this.layout.newGraph(),e=this.layout.newNode(null),h=this.add(r,e);return this.setRootGraph(h),this.rootGraph},i.prototype.add=function(r,e,h,n,m){if(h==null&&n==null&&m==null){if(r==null)throw"Graph is null!";if(e==null)throw"Parent node is null!";if(this.graphs.indexOf(r)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(r),r.parent!=null)throw"Already has a parent!";if(e.child!=null)throw"Already has a child!";return r.parent=e,e.child=r,r}else{m=h,n=e,h=r;var o=n.getOwner(),t=m.getOwner();if(!(o!=null&&o.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(t!=null&&t.getGraphManager()==this))throw"Target not in this graph mgr!";if(o==t)return h.isInterGraph=!1,o.add(h,n,m);if(h.isInterGraph=!0,h.source=n,h.target=m,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},i.prototype.remove=function(r){if(r instanceof u){var e=r;if(e.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(e==this.rootGraph||e.parent!=null&&e.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(e.getEdges());for(var n,m=h.length,o=0;o<m;o++)n=h[o],e.remove(n);var t=[];t=t.concat(e.getNodes());var d;m=t.length;for(var o=0;o<m;o++)d=t[o],e.remove(d);e==this.rootGraph&&this.setRootGraph(null);var f=this.graphs.indexOf(e);this.graphs.splice(f,1),e.parent=null}else if(r instanceof s){if(n=r,n==null)throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(!(n.source!=null&&n.target!=null))throw"Source and/or target is null!";if(!(n.source.edges.indexOf(n)!=-1&&n.target.edges.indexOf(n)!=-1))throw"Source and/or target doesn't know this edge!";var f=n.source.edges.indexOf(n);if(n.source.edges.splice(f,1),f=n.target.edges.indexOf(n),n.target.edges.splice(f,1),!(n.source.owner!=null&&n.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(n.source.owner.getGraphManager().edges.indexOf(n)==-1)throw"Not in owner graph manager's edge list!";var f=n.source.owner.getGraphManager().edges.indexOf(n);n.source.owner.getGraphManager().edges.splice(f,1)}},i.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},i.prototype.getGraphs=function(){return this.graphs},i.prototype.getAllNodes=function(){if(this.allNodes==null){for(var r=[],e=this.getGraphs(),h=e.length,n=0;n<h;n++)r=r.concat(e[n].getNodes());this.allNodes=r}return this.allNodes},i.prototype.resetAllNodes=function(){this.allNodes=null},i.prototype.resetAllEdges=function(){this.allEdges=null},i.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},i.prototype.getAllEdges=function(){if(this.allEdges==null){for(var r=[],e=this.getGraphs(),h=e.length,n=0;n<e.length;n++)r=r.concat(e[n].getEdges());r=r.concat(this.edges),this.allEdges=r}return this.allEdges},i.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},i.prototype.setAllNodesToApplyGravitation=function(r){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=r},i.prototype.getRoot=function(){return this.rootGraph},i.prototype.setRootGraph=function(r){if(r.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=r,r.parent==null&&(r.parent=this.layout.newNode("Root node"))},i.prototype.getLayout=function(){return this.layout},i.prototype.isOneAncestorOfOther=function(r,e){if(!(r!=null&&e!=null))throw"assert failed";if(r==e)return!0;var h=r.getOwner(),n;do{if(n=h.getParent(),n==null)break;if(n==e)return!0;if(h=n.getOwner(),h==null)break}while(!0);h=e.getOwner();do{if(n=h.getParent(),n==null)break;if(n==r)return!0;if(h=n.getOwner(),h==null)break}while(!0);return!1},i.prototype.calcLowestCommonAncestors=function(){for(var r,e,h,n,m,o=this.getAllEdges(),t=o.length,d=0;d<t;d++){if(r=o[d],e=r.source,h=r.target,r.lca=null,r.sourceInLca=e,r.targetInLca=h,e==h){r.lca=e.getOwner();continue}for(n=e.getOwner();r.lca==null;){for(r.targetInLca=h,m=h.getOwner();r.lca==null;){if(m==n){r.lca=m;break}if(m==this.rootGraph)break;if(r.lca!=null)throw"assert failed";r.targetInLca=m.getParent(),m=r.targetInLca.getOwner()}if(n==this.rootGraph)break;r.lca==null&&(r.sourceInLca=n.getParent(),n=r.sourceInLca.getOwner())}if(r.lca==null)throw"assert failed"}},i.prototype.calcLowestCommonAncestor=function(r,e){if(r==e)return r.getOwner();var h=r.getOwner();do{if(h==null)break;var n=e.getOwner();do{if(n==null)break;if(n==h)return n;n=n.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},i.prototype.calcInclusionTreeDepths=function(r,e){r==null&&e==null&&(r=this.rootGraph,e=1);for(var h,n=r.getNodes(),m=n.length,o=0;o<m;o++)h=n[o],h.inclusionTreeDepth=e,h.child!=null&&this.calcInclusionTreeDepths(h.child,e+1)},i.prototype.includesInvalidEdge=function(){for(var r,e=[],h=this.edges.length,n=0;n<h;n++)r=this.edges[n],this.isOneAncestorOfOther(r.source,r.target)&&e.push(r);for(var n=0;n<e.length;n++)this.remove(e[n]);return!1},C.exports=i},function(C,G,A){var u=A(12);function s(){}T(s,"IGeometry"),s.calcSeparationAmount=function(i,r,e,h){if(!i.intersects(r))throw"assert failed";var n=new Array(2);this.decideDirectionsForOverlappingNodes(i,r,n),e[0]=Math.min(i.getRight(),r.getRight())-Math.max(i.x,r.x),e[1]=Math.min(i.getBottom(),r.getBottom())-Math.max(i.y,r.y),i.getX()<=r.getX()&&i.getRight()>=r.getRight()?e[0]+=Math.min(r.getX()-i.getX(),i.getRight()-r.getRight()):r.getX()<=i.getX()&&r.getRight()>=i.getRight()&&(e[0]+=Math.min(i.getX()-r.getX(),r.getRight()-i.getRight())),i.getY()<=r.getY()&&i.getBottom()>=r.getBottom()?e[1]+=Math.min(r.getY()-i.getY(),i.getBottom()-r.getBottom()):r.getY()<=i.getY()&&r.getBottom()>=i.getBottom()&&(e[1]+=Math.min(i.getY()-r.getY(),r.getBottom()-i.getBottom()));var m=Math.abs((r.getCenterY()-i.getCenterY())/(r.getCenterX()-i.getCenterX()));r.getCenterY()===i.getCenterY()&&r.getCenterX()===i.getCenterX()&&(m=1);var o=m*e[0],t=e[1]/m;e[0]<t?t=e[0]:o=e[1],e[0]=-1*n[0]*(t/2+h),e[1]=-1*n[1]*(o/2+h)},s.decideDirectionsForOverlappingNodes=function(i,r,e){i.getCenterX()<r.getCenterX()?e[0]=-1:e[0]=1,i.getCenterY()<r.getCenterY()?e[1]=-1:e[1]=1},s.getIntersection2=function(i,r,e){var h=i.getCenterX(),n=i.getCenterY(),m=r.getCenterX(),o=r.getCenterY();if(i.intersects(r))return e[0]=h,e[1]=n,e[2]=m,e[3]=o,!0;var t=i.getX(),d=i.getY(),f=i.getRight(),l=i.getX(),N=i.getBottom(),c=i.getRight(),E=i.getWidthHalf(),_=i.getHeightHalf(),L=r.getX(),X=r.getY(),z=r.getRight(),V=r.getX(),B=r.getBottom(),q=r.getRight(),x=r.getWidthHalf(),ne=r.getHeightHalf(),a=!1,v=!1;if(h===m){if(n>o)return e[0]=h,e[1]=d,e[2]=m,e[3]=B,!1;if(n<o)return e[0]=h,e[1]=N,e[2]=m,e[3]=X,!1}else if(n===o){if(h>m)return e[0]=t,e[1]=n,e[2]=z,e[3]=o,!1;if(h<m)return e[0]=f,e[1]=n,e[2]=L,e[3]=o,!1}else{var p=i.height/i.width,y=r.height/r.width,g=(o-n)/(m-h),D=void 0,O=void 0,M=void 0,k=void 0,U=void 0,W=void 0;if(-p===g?h>m?(e[0]=l,e[1]=N,a=!0):(e[0]=f,e[1]=d,a=!0):p===g&&(h>m?(e[0]=t,e[1]=d,a=!0):(e[0]=c,e[1]=N,a=!0)),-y===g?m>h?(e[2]=V,e[3]=B,v=!0):(e[2]=z,e[3]=X,v=!0):y===g&&(m>h?(e[2]=L,e[3]=X,v=!0):(e[2]=q,e[3]=B,v=!0)),a&&v)return!1;if(h>m?n>o?(D=this.getCardinalDirection(p,g,4),O=this.getCardinalDirection(y,g,2)):(D=this.getCardinalDirection(-p,g,3),O=this.getCardinalDirection(-y,g,1)):n>o?(D=this.getCardinalDirection(-p,g,1),O=this.getCardinalDirection(-y,g,3)):(D=this.getCardinalDirection(p,g,2),O=this.getCardinalDirection(y,g,4)),!a)switch(D){case 1:k=d,M=h+-_/g,e[0]=M,e[1]=k;break;case 2:M=c,k=n+E*g,e[0]=M,e[1]=k;break;case 3:k=N,M=h+_/g,e[0]=M,e[1]=k;break;case 4:M=l,k=n+-E*g,e[0]=M,e[1]=k;break}if(!v)switch(O){case 1:W=X,U=m+-ne/g,e[2]=U,e[3]=W;break;case 2:U=q,W=o+x*g,e[2]=U,e[3]=W;break;case 3:W=B,U=m+ne/g,e[2]=U,e[3]=W;break;case 4:U=V,W=o+-x*g,e[2]=U,e[3]=W;break}}return!1},s.getCardinalDirection=function(i,r,e){return i>r?e:1+e%4},s.getIntersection=function(i,r,e,h){if(h==null)return this.getIntersection2(i,r,e);var n=i.x,m=i.y,o=r.x,t=r.y,d=e.x,f=e.y,l=h.x,N=h.y,c=void 0,E=void 0,_=void 0,L=void 0,X=void 0,z=void 0,V=void 0,B=void 0,q=void 0;return _=t-m,X=n-o,V=o*m-n*t,L=N-f,z=d-l,B=l*f-d*N,q=_*z-L*X,q===0?null:(c=(X*B-z*V)/q,E=(L*V-_*B)/q,new u(c,E))},s.angleOfVector=function(i,r,e,h){var n=void 0;return i!==e?(n=Math.atan((h-r)/(e-i)),e<i?n+=Math.PI:h<r&&(n+=this.TWO_PI)):h<r?n=this.ONE_AND_HALF_PI:n=this.HALF_PI,n},s.doIntersect=function(i,r,e,h){var n=i.x,m=i.y,o=r.x,t=r.y,d=e.x,f=e.y,l=h.x,N=h.y,c=(o-n)*(N-f)-(l-d)*(t-m);if(c===0)return!1;var E=((N-f)*(l-n)+(d-l)*(N-m))/c,_=((m-t)*(l-n)+(o-n)*(N-m))/c;return 0<E&&E<1&&0<_&&_<1},s.findCircleLineIntersections=function(i,r,e,h,n,m,o){var t=(e-i)*(e-i)+(h-r)*(h-r),d=2*((i-n)*(e-i)+(r-m)*(h-r)),f=(i-n)*(i-n)+(r-m)*(r-m)-o*o,l=d*d-4*t*f;if(l>=0){var N=(-d+Math.sqrt(d*d-4*t*f))/(2*t),c=(-d-Math.sqrt(d*d-4*t*f))/(2*t),E=null;return N>=0&&N<=1?[N]:c>=0&&c<=1?[c]:E}else return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,C.exports=s},function(C,G,A){function u(){}T(u,"IMath"),u.sign=function(s){return s>0?1:s<0?-1:0},u.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},u.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},C.exports=u},function(C,G,A){function u(){}T(u,"Integer"),u.MAX_VALUE=2147483647,u.MIN_VALUE=-2147483648,C.exports=u},function(C,G,A){var u=function(){function n(m,o){for(var t=0;t<o.length;t++){var d=o[t];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(m,d.key,d)}}return T(n,"defineProperties"),function(m,o,t){return o&&n(m.prototype,o),t&&n(m,t),m}}();function s(n,m){if(!(n instanceof m))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var i=T(function(n){return{value:n,next:null,prev:null}},"nodeFrom"),r=T(function(n,m,o,t){return n!==null?n.next=m:t.head=m,o!==null?o.prev=m:t.tail=m,m.prev=n,m.next=o,t.length++,m},"add"),e=T(function(n,m){var o=n.prev,t=n.next;return o!==null?o.next=t:m.head=t,t!==null?t.prev=o:m.tail=o,n.prev=n.next=null,m.length--,n},"_remove"),h=function(){function n(m){var o=this;s(this,n),this.length=0,this.head=null,this.tail=null,m==null||m.forEach(function(t){return o.push(t)})}return T(n,"LinkedList"),u(n,[{key:"size",value:T(function(){return this.length},"size")},{key:"insertBefore",value:T(function(m,o){return r(o.prev,i(m),o,this)},"insertBefore")},{key:"insertAfter",value:T(function(m,o){return r(o,i(m),o.next,this)},"insertAfter")},{key:"insertNodeBefore",value:T(function(m,o){return r(o.prev,m,o,this)},"insertNodeBefore")},{key:"insertNodeAfter",value:T(function(m,o){return r(o,m,o.next,this)},"insertNodeAfter")},{key:"push",value:T(function(m){return r(this.tail,i(m),null,this)},"push")},{key:"unshift",value:T(function(m){return r(null,i(m),this.head,this)},"unshift")},{key:"remove",value:T(function(m){return e(m,this)},"remove")},{key:"pop",value:T(function(){return e(this.tail,this).value},"pop")},{key:"popNode",value:T(function(){return e(this.tail,this)},"popNode")},{key:"shift",value:T(function(){return e(this.head,this).value},"shift")},{key:"shiftNode",value:T(function(){return e(this.head,this)},"shiftNode")},{key:"get_object_at",value:T(function(m){if(m<=this.length()){for(var o=1,t=this.head;o<m;)t=t.next,o++;return t.value}},"get_object_at")},{key:"set_object_at",value:T(function(m,o){if(m<=this.length()){for(var t=1,d=this.head;t<m;)d=d.next,t++;d.value=o}},"set_object_at")}]),n}();C.exports=h},function(C,G,A){function u(s,i,r){this.x=null,this.y=null,s==null&&i==null&&r==null?(this.x=0,this.y=0):typeof s=="number"&&typeof i=="number"&&r==null?(this.x=s,this.y=i):s.constructor.name=="Point"&&i==null&&r==null&&(r=s,this.x=r.x,this.y=r.y)}T(u,"Point"),u.prototype.getX=function(){return this.x},u.prototype.getY=function(){return this.y},u.prototype.getLocation=function(){return new u(this.x,this.y)},u.prototype.setLocation=function(s,i,r){s.constructor.name=="Point"&&i==null&&r==null?(r=s,this.setLocation(r.x,r.y)):typeof s=="number"&&typeof i=="number"&&r==null&&(parseInt(s)==s&&parseInt(i)==i?this.move(s,i):(this.x=Math.floor(s+.5),this.y=Math.floor(i+.5)))},u.prototype.move=function(s,i){this.x=s,this.y=i},u.prototype.translate=function(s,i){this.x+=s,this.y+=i},u.prototype.equals=function(s){if(s.constructor.name=="Point"){var i=s;return this.x==i.x&&this.y==i.y}return this==s},u.prototype.toString=function(){return new u().constructor.name+"[x="+this.x+",y="+this.y+"]"},C.exports=u},function(C,G,A){function u(s,i,r,e){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&i!=null&&r!=null&&e!=null&&(this.x=s,this.y=i,this.width=r,this.height=e)}T(u,"RectangleD"),u.prototype.getX=function(){return this.x},u.prototype.setX=function(s){this.x=s},u.prototype.getY=function(){return this.y},u.prototype.setY=function(s){this.y=s},u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(s){this.width=s},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(s){this.height=s},u.prototype.getRight=function(){return this.x+this.width},u.prototype.getBottom=function(){return this.y+this.height},u.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},u.prototype.getCenterX=function(){return this.x+this.width/2},u.prototype.getMinX=function(){return this.getX()},u.prototype.getMaxX=function(){return this.getX()+this.width},u.prototype.getCenterY=function(){return this.y+this.height/2},u.prototype.getMinY=function(){return this.getY()},u.prototype.getMaxY=function(){return this.getY()+this.height},u.prototype.getWidthHalf=function(){return this.width/2},u.prototype.getHeightHalf=function(){return this.height/2},C.exports=u},function(C,G,A){var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function s(){}T(s,"UniqueIDGeneretor"),s.lastID=0,s.createID=function(i){return s.isPrimitive(i)?i:(i.uniqueID!=null||(i.uniqueID=s.getString(),s.lastID++),i.uniqueID)},s.getString=function(i){return i==null&&(i=s.lastID),"Object#"+i},s.isPrimitive=function(i){var r=typeof i>"u"?"undefined":u(i);return i==null||r!="object"&&r!="function"},C.exports=s},function(C,G,A){function u(d){if(Array.isArray(d)){for(var f=0,l=Array(d.length);f<d.length;f++)l[f]=d[f];return l}else return Array.from(d)}T(u,"_toConsumableArray");var s=A(0),i=A(7),r=A(3),e=A(1),h=A(6),n=A(5),m=A(17),o=A(29);function t(d){o.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new i(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,d!=null&&(this.isRemoteUse=d)}T(t,"Layout"),t.RANDOM_SEED=1,t.prototype=Object.create(o.prototype),t.prototype.getGraphManager=function(){return this.graphManager},t.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},t.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},t.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},t.prototype.newGraphManager=function(){var d=new i(this);return this.graphManager=d,d},t.prototype.newGraph=function(d){return new h(null,this.graphManager,d)},t.prototype.newNode=function(d){return new r(this.graphManager,d)},t.prototype.newEdge=function(d){return new e(null,null,d)},t.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},t.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var d;return this.checkLayoutSuccess()?d=!1:d=this.layout(),s.ANIMATE==="during"?!1:(d&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,d)},t.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},t.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var d,f=this.graphManager.getAllEdges(),l=0;l<f.length;l++)d=f[l];for(var N,c=this.graphManager.getRoot().getNodes(),l=0;l<c.length;l++)N=c[l];this.update(this.graphManager.getRoot())}},t.prototype.update=function(d){if(d==null)this.update2();else if(d instanceof r){var f=d;if(f.getChild()!=null)for(var l=f.getChild().getNodes(),N=0;N<l.length;N++)update(l[N]);if(f.vGraphObject!=null){var c=f.vGraphObject;c.update(f)}}else if(d instanceof e){var E=d;if(E.vGraphObject!=null){var _=E.vGraphObject;_.update(E)}}else if(d instanceof h){var L=d;if(L.vGraphObject!=null){var X=L.vGraphObject;X.update(L)}}},t.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},t.prototype.transform=function(d){if(d==null)this.transform(new n(0,0));else{var f=new m,l=this.graphManager.getRoot().updateLeftTop();if(l!=null){f.setWorldOrgX(d.x),f.setWorldOrgY(d.y),f.setDeviceOrgX(l.x),f.setDeviceOrgY(l.y);for(var N=this.getAllNodes(),c,E=0;E<N.length;E++)c=N[E],c.transform(f)}}},t.prototype.positionNodesRandomly=function(d){if(d==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var f,l,N=d.getNodes(),c=0;c<N.length;c++)f=N[c],l=f.getChild(),l==null||l.getNodes().length==0?f.scatter():(this.positionNodesRandomly(l),f.updateBounds())},t.prototype.getFlatForest=function(){for(var d=[],f=!0,l=this.graphManager.getRoot().getNodes(),N=!0,c=0;c<l.length;c++)l[c].getChild()!=null&&(N=!1);if(!N)return d;var E=new Set,_=[],L=new Map,X=[];for(X=X.concat(l);X.length>0&&f;){for(_.push(X[0]);_.length>0&&f;){var z=_[0];_.splice(0,1),E.add(z);for(var V=z.getEdges(),c=0;c<V.length;c++){var B=V[c].getOtherEnd(z);if(L.get(z)!=B)if(!E.has(B))_.push(B),L.set(B,z);else{f=!1;break}}}if(!f)d=[];else{var q=[].concat(u(E));d.push(q);for(var c=0;c<q.length;c++){var x=q[c],ne=X.indexOf(x);ne>-1&&X.splice(ne,1)}E=new Set,L=new Map}}return d},t.prototype.createDummyNodesForBendpoints=function(d){for(var f=[],l=d.source,N=this.graphManager.calcLowestCommonAncestor(d.source,d.target),c=0;c<d.bendpoints.length;c++){var E=this.newNode(null);E.setRect(new Point(0,0),new Dimension(1,1)),N.add(E);var _=this.newEdge(null);this.graphManager.add(_,l,E),f.add(E),l=E}var _=this.newEdge(null);return this.graphManager.add(_,l,d.target),this.edgeToDummyNodes.set(d,f),d.isInterGraph()?this.graphManager.remove(d):N.remove(d),f},t.prototype.createBendpointsFromDummyNodes=function(){var d=[];d=d.concat(this.graphManager.getAllEdges()),d=[].concat(u(this.edgeToDummyNodes.keys())).concat(d);for(var f=0;f<d.length;f++){var l=d[f];if(l.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(l),c=0;c<N.length;c++){var E=N[c],_=new n(E.getCenterX(),E.getCenterY()),L=l.bendpoints.get(c);L.x=_.x,L.y=_.y,E.getOwner().remove(E)}this.graphManager.add(l,l.source,l.target)}}},t.transform=function(d,f,l,N){if(l!=null&&N!=null){var c=f;if(d<=50){var E=f/l;c-=(f-E)/50*(50-d)}else{var _=f*N;c+=(_-f)/50*(d-50)}return c}else{var L,X;return d<=50?(L=9*f/500,X=f/10):(L=9*f/50,X=-8*f),L*d+X}},t.findCenterOfTree=function(d){var f=[];f=f.concat(d);var l=[],N=new Map,c=!1,E=null;(f.length==1||f.length==2)&&(c=!0,E=f[0]);for(var _=0;_<f.length;_++){var L=f[_],X=L.getNeighborsList().size;N.set(L,L.getNeighborsList().size),X==1&&l.push(L)}var z=[];for(z=z.concat(l);!c;){var V=[];V=V.concat(z),z=[];for(var _=0;_<f.length;_++){var L=f[_],B=f.indexOf(L);B>=0&&f.splice(B,1);var q=L.getNeighborsList();q.forEach(function(a){if(l.indexOf(a)<0){var v=N.get(a),p=v-1;p==1&&z.push(a),N.set(a,p)}})}l=l.concat(z),(f.length==1||f.length==2)&&(c=!0,E=f[0])}return E},t.prototype.setGraphManager=function(d){this.graphManager=d},C.exports=t},function(C,G,A){function u(){}T(u,"RandomSeed"),u.seed=1,u.x=0,u.nextDouble=function(){return u.x=Math.sin(u.seed++)*1e4,u.x-Math.floor(u.x)},C.exports=u},function(C,G,A){var u=A(5);function s(i,r){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}T(s,"Transform"),s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(i){this.lworldOrgX=i},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(i){this.lworldOrgY=i},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(i){this.lworldExtX=i},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(i){this.lworldExtY=i},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(i){this.ldeviceOrgX=i},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(i){this.ldeviceOrgY=i},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(i){this.ldeviceExtX=i},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(i){this.ldeviceExtY=i},s.prototype.transformX=function(i){var r=0,e=this.lworldExtX;return e!=0&&(r=this.ldeviceOrgX+(i-this.lworldOrgX)*this.ldeviceExtX/e),r},s.prototype.transformY=function(i){var r=0,e=this.lworldExtY;return e!=0&&(r=this.ldeviceOrgY+(i-this.lworldOrgY)*this.ldeviceExtY/e),r},s.prototype.inverseTransformX=function(i){var r=0,e=this.ldeviceExtX;return e!=0&&(r=this.lworldOrgX+(i-this.ldeviceOrgX)*this.lworldExtX/e),r},s.prototype.inverseTransformY=function(i){var r=0,e=this.ldeviceExtY;return e!=0&&(r=this.lworldOrgY+(i-this.ldeviceOrgY)*this.lworldExtY/e),r},s.prototype.inverseTransformPoint=function(i){var r=new u(this.inverseTransformX(i.x),this.inverseTransformY(i.y));return r},C.exports=s},function(C,G,A){function u(o){if(Array.isArray(o)){for(var t=0,d=Array(o.length);t<o.length;t++)d[t]=o[t];return d}else return Array.from(o)}T(u,"_toConsumableArray");var s=A(15),i=A(4),r=A(0),e=A(8),h=A(9);function n(){s.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}T(n,"FDLayout"),n.prototype=Object.create(s.prototype);for(var m in s)n[m]=s[m];n.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},n.prototype.calcIdealEdgeLengths=function(){for(var o,t,d,f,l,N,c,E=this.getGraphManager().getAllEdges(),_=0;_<E.length;_++)o=E[_],t=o.idealLength,o.isInterGraph&&(f=o.getSource(),l=o.getTarget(),N=o.getSourceInLca().getEstimatedSize(),c=o.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(o.idealLength+=N+c-2*r.SIMPLE_NODE_SIZE),d=o.getLca().getInclusionTreeDepth(),o.idealLength+=t*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(f.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*d))},n.prototype.initSpringEmbedder=function(){var o=this.getAllNodes().length;this.incremental?(o>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(o-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(o>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(o-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},n.prototype.calcSpringForces=function(){for(var o=this.getAllEdges(),t,d=0;d<o.length;d++)t=o[d],this.calcSpringForce(t,t.idealLength)},n.prototype.calcRepulsionForces=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d,f,l,N,c=this.getAllNodes(),E;if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),E=new Set,d=0;d<c.length;d++)l=c[d],this.calculateRepulsionForceOfANode(l,E,o,t),E.add(l);else for(d=0;d<c.length;d++)for(l=c[d],f=d+1;f<c.length;f++)N=c[f],l.getOwner()==N.getOwner()&&this.calcRepulsionForce(l,N)},n.prototype.calcGravitationalForces=function(){for(var o,t=this.getAllNodesToApplyGravitation(),d=0;d<t.length;d++)o=t[d],this.calcGravitationalForce(o)},n.prototype.moveNodes=function(){for(var o=this.getAllNodes(),t,d=0;d<o.length;d++)t=o[d],t.move()},n.prototype.calcSpringForce=function(o,t){var d=o.getSource(),f=o.getTarget(),l,N,c,E;if(this.uniformLeafNodeSizes&&d.getChild()==null&&f.getChild()==null)o.updateLengthSimple();else if(o.updateLength(),o.isOverlapingSourceAndTarget)return;l=o.getLength(),l!=0&&(N=o.edgeElasticity*(l-t),c=N*(o.lengthX/l),E=N*(o.lengthY/l),d.springForceX+=c,d.springForceY+=E,f.springForceX-=c,f.springForceY-=E)},n.prototype.calcRepulsionForce=function(o,t){var d=o.getRect(),f=t.getRect(),l=new Array(2),N=new Array(4),c,E,_,L,X,z,V;if(d.intersects(f)){e.calcSeparationAmount(d,f,l,i.DEFAULT_EDGE_LENGTH/2),z=2*l[0],V=2*l[1];var B=o.noOfChildren*t.noOfChildren/(o.noOfChildren+t.noOfChildren);o.repulsionForceX-=B*z,o.repulsionForceY-=B*V,t.repulsionForceX+=B*z,t.repulsionForceY+=B*V}else this.uniformLeafNodeSizes&&o.getChild()==null&&t.getChild()==null?(c=f.getCenterX()-d.getCenterX(),E=f.getCenterY()-d.getCenterY()):(e.getIntersection(d,f,N),c=N[2]-N[0],E=N[3]-N[1]),Math.abs(c)<i.MIN_REPULSION_DIST&&(c=h.sign(c)*i.MIN_REPULSION_DIST),Math.abs(E)<i.MIN_REPULSION_DIST&&(E=h.sign(E)*i.MIN_REPULSION_DIST),_=c*c+E*E,L=Math.sqrt(_),X=(o.nodeRepulsion/2+t.nodeRepulsion/2)*o.noOfChildren*t.noOfChildren/_,z=X*c/L,V=X*E/L,o.repulsionForceX-=z,o.repulsionForceY-=V,t.repulsionForceX+=z,t.repulsionForceY+=V},n.prototype.calcGravitationalForce=function(o){var t,d,f,l,N,c,E,_;t=o.getOwner(),d=(t.getRight()+t.getLeft())/2,f=(t.getTop()+t.getBottom())/2,l=o.getCenterX()-d,N=o.getCenterY()-f,c=Math.abs(l)+o.getWidth()/2,E=Math.abs(N)+o.getHeight()/2,o.getOwner()==this.graphManager.getRoot()?(_=t.getEstimatedSize()*this.gravityRangeFactor,(c>_||E>_)&&(o.gravitationForceX=-this.gravityConstant*l,o.gravitationForceY=-this.gravityConstant*N)):(_=t.getEstimatedSize()*this.compoundGravityRangeFactor,(c>_||E>_)&&(o.gravitationForceX=-this.gravityConstant*l*this.compoundGravityConstant,o.gravitationForceY=-this.gravityConstant*N*this.compoundGravityConstant))},n.prototype.isConverged=function(){var o,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),o=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,o||t},n.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},n.prototype.calcNoOfChildrenForAllNodes=function(){for(var o,t=this.graphManager.getAllNodes(),d=0;d<t.length;d++)o=t[d],o.noOfChildren=o.getNoOfChildren()},n.prototype.calcGrid=function(o){var t=0,d=0;t=parseInt(Math.ceil((o.getRight()-o.getLeft())/this.repulsionRange)),d=parseInt(Math.ceil((o.getBottom()-o.getTop())/this.repulsionRange));for(var f=new Array(t),l=0;l<t;l++)f[l]=new Array(d);for(var l=0;l<t;l++)for(var N=0;N<d;N++)f[l][N]=new Array;return f},n.prototype.addNodeToGrid=function(o,t,d){var f=0,l=0,N=0,c=0;f=parseInt(Math.floor((o.getRect().x-t)/this.repulsionRange)),l=parseInt(Math.floor((o.getRect().width+o.getRect().x-t)/this.repulsionRange)),N=parseInt(Math.floor((o.getRect().y-d)/this.repulsionRange)),c=parseInt(Math.floor((o.getRect().height+o.getRect().y-d)/this.repulsionRange));for(var E=f;E<=l;E++)for(var _=N;_<=c;_++)this.grid[E][_].push(o),o.setGridCoordinates(f,l,N,c)},n.prototype.updateGrid=function(){var o,t,d=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),o=0;o<d.length;o++)t=d[o],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},n.prototype.calculateRepulsionForceOfANode=function(o,t,d,f){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&d||f){var l=new Set;o.surrounding=new Array;for(var N,c=this.grid,E=o.startX-1;E<o.finishX+2;E++)for(var _=o.startY-1;_<o.finishY+2;_++)if(!(E<0||_<0||E>=c.length||_>=c[0].length)){for(var L=0;L<c[E][_].length;L++)if(N=c[E][_][L],!(o.getOwner()!=N.getOwner()||o==N)&&!t.has(N)&&!l.has(N)){var X=Math.abs(o.getCenterX()-N.getCenterX())-(o.getWidth()/2+N.getWidth()/2),z=Math.abs(o.getCenterY()-N.getCenterY())-(o.getHeight()/2+N.getHeight()/2);X<=this.repulsionRange&&z<=this.repulsionRange&&l.add(N)}}o.surrounding=[].concat(u(l))}for(E=0;E<o.surrounding.length;E++)this.calcRepulsionForce(o,o.surrounding[E])},n.prototype.calcRepulsionRange=function(){return 0},C.exports=n},function(C,G,A){var u=A(1),s=A(4);function i(e,h,n){u.call(this,e,h,n),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}T(i,"FDLayoutEdge"),i.prototype=Object.create(u.prototype);for(var r in u)i[r]=u[r];C.exports=i},function(C,G,A){var u=A(3),s=A(4);function i(e,h,n,m){u.call(this,e,h,n,m),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}T(i,"FDLayoutNode"),i.prototype=Object.create(u.prototype);for(var r in u)i[r]=u[r];i.prototype.setGridCoordinates=function(e,h,n,m){this.startX=e,this.finishX=h,this.startY=n,this.finishY=m},C.exports=i},function(C,G,A){function u(s,i){this.width=0,this.height=0,s!==null&&i!==null&&(this.height=i,this.width=s)}T(u,"DimensionD"),u.prototype.getWidth=function(){return this.width},u.prototype.setWidth=function(s){this.width=s},u.prototype.getHeight=function(){return this.height},u.prototype.setHeight=function(s){this.height=s},C.exports=u},function(C,G,A){var u=A(14);function s(){this.map={},this.keys=[]}T(s,"HashMap"),s.prototype.put=function(i,r){var e=u.createID(i);this.contains(e)||(this.map[e]=r,this.keys.push(i))},s.prototype.contains=function(i){return u.createID(i),this.map[i]!=null},s.prototype.get=function(i){var r=u.createID(i);return this.map[r]},s.prototype.keySet=function(){return this.keys},C.exports=s},function(C,G,A){var u=A(14);function s(){this.set={}}T(s,"HashSet"),s.prototype.add=function(i){var r=u.createID(i);this.contains(r)||(this.set[r]=i)},s.prototype.remove=function(i){delete this.set[u.createID(i)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(i){return this.set[u.createID(i)]==i},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(i){for(var r=Object.keys(this.set),e=r.length,h=0;h<e;h++)i.push(this.set[r[h]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(i){for(var r=i.length,e=0;e<r;e++){var h=i[e];this.add(h)}},C.exports=s},function(C,G,A){function u(){}T(u,"Matrix"),u.multMat=function(s,i){for(var r=[],e=0;e<s.length;e++){r[e]=[];for(var h=0;h<i[0].length;h++){r[e][h]=0;for(var n=0;n<s[0].length;n++)r[e][h]+=s[e][n]*i[n][h]}}return r},u.transpose=function(s){for(var i=[],r=0;r<s[0].length;r++){i[r]=[];for(var e=0;e<s.length;e++)i[r][e]=s[e][r]}return i},u.multCons=function(s,i){for(var r=[],e=0;e<s.length;e++)r[e]=s[e]*i;return r},u.minusOp=function(s,i){for(var r=[],e=0;e<s.length;e++)r[e]=s[e]-i[e];return r},u.dotProduct=function(s,i){for(var r=0,e=0;e<s.length;e++)r+=s[e]*i[e];return r},u.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},u.normalize=function(s){for(var i=[],r=this.mag(s),e=0;e<s.length;e++)i[e]=s[e]/r;return i},u.multGamma=function(s){for(var i=[],r=0,e=0;e<s.length;e++)r+=s[e];r*=-1/s.length;for(var h=0;h<s.length;h++)i[h]=r+s[h];return i},u.multL=function(s,i,r){for(var e=[],h=[],n=[],m=0;m<i[0].length;m++){for(var o=0,t=0;t<i.length;t++)o+=-.5*i[t][m]*s[t];h[m]=o}for(var d=0;d<r.length;d++){for(var f=0,l=0;l<r.length;l++)f+=r[d][l]*h[l];n[d]=f}for(var N=0;N<i.length;N++){for(var c=0,E=0;E<i[0].length;E++)c+=i[N][E]*n[E];e[N]=c}return e},C.exports=u},function(C,G,A){var u=function(){function e(h,n){for(var m=0;m<n.length;m++){var o=n[m];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(h,o.key,o)}}return T(e,"defineProperties"),function(h,n,m){return n&&e(h.prototype,n),m&&e(h,m),h}}();function s(e,h){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var i=A(11),r=function(){function e(h,n){s(this,e),(n!==null||n!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var m=void 0;h instanceof i?m=h.size():m=h.length,this._quicksort(h,0,m-1)}return T(e,"Quicksort"),u(e,[{key:"_quicksort",value:T(function(h,n,m){if(n<m){var o=this._partition(h,n,m);this._quicksort(h,n,o),this._quicksort(h,o+1,m)}},"_quicksort")},{key:"_partition",value:T(function(h,n,m){for(var o=this._get(h,n),t=n,d=m;;){for(;this.compareFunction(o,this._get(h,d));)d--;for(;this.compareFunction(this._get(h,t),o);)t++;if(t<d)this._swap(h,t,d),t++,d--;else return d}},"_partition")},{key:"_get",value:T(function(h,n){return h instanceof i?h.get_object_at(n):h[n]},"_get")},{key:"_set",value:T(function(h,n,m){h instanceof i?h.set_object_at(n,m):h[n]=m},"_set")},{key:"_swap",value:T(function(h,n,m){var o=this._get(h,n);this._set(h,n,this._get(h,m)),this._set(h,m,o)},"_swap")},{key:"_defaultCompareFunction",value:T(function(h,n){return n>h},"_defaultCompareFunction")}]),e}();C.exports=r},function(C,G,A){function u(){}T(u,"SVD"),u.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var i=Math.min(this.m,this.n);this.s=function(Ae){for(var we=[];Ae-- >0;)we.push(0);return we}(Math.min(this.m+1,this.n)),this.U=function(Ae){var we=T(function Fe(Pe){if(Pe.length==0)return 0;for(var Be=[],qe=0;qe<Pe[0];qe++)Be.push(Fe(Pe.slice(1)));return Be},"allocate");return we(Ae)}([this.m,i]),this.V=function(Ae){var we=T(function Fe(Pe){if(Pe.length==0)return 0;for(var Be=[],qe=0;qe<Pe[0];qe++)Be.push(Fe(Pe.slice(1)));return Be},"allocate");return we(Ae)}([this.n,this.n]);for(var r=function(Ae){for(var we=[];Ae-- >0;)we.push(0);return we}(this.n),e=function(Ae){for(var we=[];Ae-- >0;)we.push(0);return we}(this.m),h=!0,n=!0,m=Math.min(this.m-1,this.n),o=Math.max(0,Math.min(this.n-2,this.m)),t=0;t<Math.max(m,o);t++){if(t<m){this.s[t]=0;for(var d=t;d<this.m;d++)this.s[t]=u.hypot(this.s[t],s[d][t]);if(this.s[t]!==0){s[t][t]<0&&(this.s[t]=-this.s[t]);for(var f=t;f<this.m;f++)s[f][t]/=this.s[t];s[t][t]+=1}this.s[t]=-this.s[t]}for(var l=t+1;l<this.n;l++){if(function(Ae,we){return Ae&&we}(t<m,this.s[t]!==0)){for(var N=0,c=t;c<this.m;c++)N+=s[c][t]*s[c][l];N=-N/s[t][t];for(var E=t;E<this.m;E++)s[E][l]+=N*s[E][t]}r[l]=s[t][l]}if(function(Ae,we){return Ae&&we}(h,t<m))for(var _=t;_<this.m;_++)this.U[_][t]=s[_][t];if(t<o){r[t]=0;for(var L=t+1;L<this.n;L++)r[t]=u.hypot(r[t],r[L]);if(r[t]!==0){r[t+1]<0&&(r[t]=-r[t]);for(var X=t+1;X<this.n;X++)r[X]/=r[t];r[t+1]+=1}if(r[t]=-r[t],function(Ae,we){return Ae&&we}(t+1<this.m,r[t]!==0)){for(var z=t+1;z<this.m;z++)e[z]=0;for(var V=t+1;V<this.n;V++)for(var B=t+1;B<this.m;B++)e[B]+=r[V]*s[B][V];for(var q=t+1;q<this.n;q++)for(var x=-r[q]/r[t+1],ne=t+1;ne<this.m;ne++)s[ne][q]+=x*e[ne]}if(n)for(var a=t+1;a<this.n;a++)this.V[a][t]=r[a]}}var v=Math.min(this.n,this.m+1);if(m<this.n&&(this.s[m]=s[m][m]),this.m<v&&(this.s[v-1]=0),o+1<v&&(r[o]=s[o][v-1]),r[v-1]=0,h){for(var p=m;p<i;p++){for(var y=0;y<this.m;y++)this.U[y][p]=0;this.U[p][p]=1}for(var g=m-1;g>=0;g--)if(this.s[g]!==0){for(var D=g+1;D<i;D++){for(var O=0,M=g;M<this.m;M++)O+=this.U[M][g]*this.U[M][D];O=-O/this.U[g][g];for(var k=g;k<this.m;k++)this.U[k][D]+=O*this.U[k][g]}for(var U=g;U<this.m;U++)this.U[U][g]=-this.U[U][g];this.U[g][g]=1+this.U[g][g];for(var W=0;W<g-1;W++)this.U[W][g]=0}else{for(var j=0;j<this.m;j++)this.U[j][g]=0;this.U[g][g]=1}}if(n)for(var Y=this.n-1;Y>=0;Y--){if(function(Ae,we){return Ae&&we}(Y<o,r[Y]!==0))for(var K=Y+1;K<i;K++){for(var P=0,b=Y+1;b<this.n;b++)P+=this.V[b][Y]*this.V[b][K];P=-P/this.V[Y+1][Y];for(var F=Y+1;F<this.n;F++)this.V[F][K]+=P*this.V[F][Y]}for(var Z=0;Z<this.n;Z++)this.V[Z][Y]=0;this.V[Y][Y]=1}for(var re=v-1,ge=0,Ie=Math.pow(2,-52),De=Math.pow(2,-966);v>0;){var S=void 0,ie=void 0;for(S=v-2;S>=-1&&S!==-1;S--)if(Math.abs(r[S])<=De+Ie*(Math.abs(this.s[S])+Math.abs(this.s[S+1]))){r[S]=0;break}if(S===v-2)ie=4;else{var he=void 0;for(he=v-1;he>=S&&he!==S;he--){var ye=(he!==v?Math.abs(r[he]):0)+(he!==S+1?Math.abs(r[he-1]):0);if(Math.abs(this.s[he])<=De+Ie*ye){this.s[he]=0;break}}he===S?ie=3:he===v-1?ie=1:(ie=2,S=he)}switch(S++,ie){case 1:{var Ce=r[v-2];r[v-2]=0;for(var ve=v-2;ve>=S;ve--){var Ee=u.hypot(this.s[ve],Ce),xe=this.s[ve]/Ee,Ve=Ce/Ee;if(this.s[ve]=Ee,ve!==S&&(Ce=-Ve*r[ve-1],r[ve-1]=xe*r[ve-1]),n)for(var Ue=0;Ue<this.n;Ue++)Ee=xe*this.V[Ue][ve]+Ve*this.V[Ue][v-1],this.V[Ue][v-1]=-Ve*this.V[Ue][ve]+xe*this.V[Ue][v-1],this.V[Ue][ve]=Ee}}break;case 2:{var ke=r[S-1];r[S-1]=0;for(var Me=S;Me<v;Me++){var Xe=u.hypot(this.s[Me],ke),Ye=this.s[Me]/Xe,$e=ke/Xe;if(this.s[Me]=Xe,ke=-$e*r[Me],r[Me]=Ye*r[Me],h)for(var le=0;le<this.m;le++)Xe=Ye*this.U[le][Me]+$e*this.U[le][S-1],this.U[le][S-1]=-$e*this.U[le][Me]+Ye*this.U[le][S-1],this.U[le][Me]=Xe}}break;case 3:{var I=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[v-1]),Math.abs(this.s[v-2])),Math.abs(r[v-2])),Math.abs(this.s[S])),Math.abs(r[S])),R=this.s[v-1]/I,$=this.s[v-2]/I,J=r[v-2]/I,Q=this.s[S]/I,pe=r[S]/I,de=(($+R)*($-R)+J*J)/2,ee=R*J*(R*J),ue=0;(function(Ae,we){return Ae||we})(de!==0,ee!==0)&&(ue=Math.sqrt(de*de+ee),de<0&&(ue=-ue),ue=ee/(de+ue));for(var Ne=(Q+R)*(Q-R)+ue,_e=Q*pe,te=S;te<v-1;te++){var Oe=u.hypot(Ne,_e),oe=Ne/Oe,se=_e/Oe;if(te!==S&&(r[te-1]=Oe),Ne=oe*this.s[te]+se*r[te],r[te]=oe*r[te]-se*this.s[te],_e=se*this.s[te+1],this.s[te+1]=oe*this.s[te+1],n)for(var ae=0;ae<this.n;ae++)Oe=oe*this.V[ae][te]+se*this.V[ae][te+1],this.V[ae][te+1]=-se*this.V[ae][te]+oe*this.V[ae][te+1],this.V[ae][te]=Oe;if(Oe=u.hypot(Ne,_e),oe=Ne/Oe,se=_e/Oe,this.s[te]=Oe,Ne=oe*r[te]+se*this.s[te+1],this.s[te+1]=-se*r[te]+oe*this.s[te+1],_e=se*r[te+1],r[te+1]=oe*r[te+1],h&&te<this.m-1)for(var Te=0;Te<this.m;Te++)Oe=oe*this.U[Te][te]+se*this.U[Te][te+1],this.U[Te][te+1]=-se*this.U[Te][te]+oe*this.U[Te][te+1],this.U[Te][te]=Oe}r[v-2]=Ne,ge=ge+1}break;case 4:{if(this.s[S]<=0&&(this.s[S]=this.s[S]<0?-this.s[S]:0,n))for(var fe=0;fe<=re;fe++)this.V[fe][S]=-this.V[fe][S];for(;S<re&&!(this.s[S]>=this.s[S+1]);){var be=this.s[S];if(this.s[S]=this.s[S+1],this.s[S+1]=be,n&&S<this.n-1)for(var Re=0;Re<this.n;Re++)be=this.V[Re][S+1],this.V[Re][S+1]=this.V[Re][S],this.V[Re][S]=be;if(h&&S<this.m-1)for(var Ge=0;Ge<this.m;Ge++)be=this.U[Ge][S+1],this.U[Ge][S+1]=this.U[Ge][S],this.U[Ge][S]=be;S++}ge=0,v--}break}}var je={U:this.U,V:this.V,S:this.s};return je},u.hypot=function(s,i){var r=void 0;return Math.abs(s)>Math.abs(i)?(r=i/s,r=Math.abs(s)*Math.sqrt(1+r*r)):i!=0?(r=s/i,r=Math.abs(i)*Math.sqrt(1+r*r)):r=0,r},C.exports=u},function(C,G,A){var u=function(){function r(e,h){for(var n=0;n<h.length;n++){var m=h[n];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(e,m.key,m)}}return T(r,"defineProperties"),function(e,h,n){return h&&r(e.prototype,h),n&&r(e,n),e}}();function s(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var i=function(){function r(e,h){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,r),this.sequence1=e,this.sequence2=h,this.match_score=n,this.mismatch_penalty=m,this.gap_penalty=o,this.iMax=e.length+1,this.jMax=h.length+1,this.grid=new Array(this.iMax);for(var t=0;t<this.iMax;t++){this.grid[t]=new Array(this.jMax);for(var d=0;d<this.jMax;d++)this.grid[t][d]=0}this.tracebackGrid=new Array(this.iMax);for(var f=0;f<this.iMax;f++){this.tracebackGrid[f]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[f][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return T(r,"NeedlemanWunsch"),u(r,[{key:"getScore",value:T(function(){return this.score},"getScore")},{key:"getAlignments",value:T(function(){return this.alignments},"getAlignments")},{key:"computeGrids",value:T(function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var m=1;m<this.jMax;m++){var o=void 0;this.sequence1[n-1]===this.sequence2[m-1]?o=this.grid[n-1][m-1]+this.match_score:o=this.grid[n-1][m-1]+this.mismatch_penalty;var t=this.grid[n-1][m]+this.gap_penalty,d=this.grid[n][m-1]+this.gap_penalty,f=[o,t,d],l=this.arrayAllMaxIndexes(f);this.grid[n][m]=f[l[0]],this.tracebackGrid[n][m]=[l.includes(0),l.includes(1),l.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]},"computeGrids")},{key:"alignmentTraceback",value:T(function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var h=e[0],n=this.tracebackGrid[h.pos[0]][h.pos[1]];n[0]&&e.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),n[1]&&e.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),n[2]&&e.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),e.shift()}return this.alignments},"alignmentTraceback")},{key:"getAllIndexes",value:T(function(e,h){for(var n=[],m=-1;(m=e.indexOf(h,m+1))!==-1;)n.push(m);return n},"getAllIndexes")},{key:"arrayAllMaxIndexes",value:T(function(e){return this.getAllIndexes(e,Math.max.apply(null,e))},"arrayAllMaxIndexes")}]),r}();C.exports=i},function(C,G,A){var u=T(function(){},"layoutBase");u.FDLayout=A(18),u.FDLayoutConstants=A(4),u.FDLayoutEdge=A(19),u.FDLayoutNode=A(20),u.DimensionD=A(21),u.HashMap=A(22),u.HashSet=A(23),u.IGeometry=A(8),u.IMath=A(9),u.Integer=A(10),u.Point=A(12),u.PointD=A(5),u.RandomSeed=A(16),u.RectangleD=A(13),u.Transform=A(17),u.UniqueIDGeneretor=A(14),u.Quicksort=A(25),u.LinkedList=A(11),u.LGraphObject=A(2),u.LGraph=A(6),u.LEdge=A(1),u.LGraphManager=A(7),u.LNode=A(3),u.Layout=A(15),u.LayoutConstants=A(0),u.NeedlemanWunsch=A(27),u.Matrix=A(24),u.SVD=A(26),C.exports=u},function(C,G,A){function u(){this.listeners=[]}T(u,"Emitter");var s=u.prototype;s.addListener=function(i,r){this.listeners.push({event:i,callback:r})},s.removeListener=function(i,r){for(var e=this.listeners.length;e>=0;e--){var h=this.listeners[e];h.event===i&&h.callback===r&&this.listeners.splice(e,1)}},s.emit=function(i,r){for(var e=0;e<this.listeners.length;e++){var h=this.listeners[e];i===h.event&&h.callback(r)}},C.exports=u}])})}),Lt=yt((w,H)=>{T(function(C,G){typeof w=="object"&&typeof H=="object"?H.exports=G(_t()):typeof define=="function"&&define.amd?define(["layout-base"],G):typeof w=="object"?w.coseBase=G(_t()):C.coseBase=G(C.layoutBase)},"webpackUniversalModuleDefinition")(w,function(C){return(()=>{var G={45:(i,r,e)=>{var h={};h.layoutBase=e(551),h.CoSEConstants=e(806),h.CoSEEdge=e(767),h.CoSEGraph=e(880),h.CoSEGraphManager=e(578),h.CoSELayout=e(765),h.CoSENode=e(991),h.ConstraintHandler=e(902),i.exports=h},806:(i,r,e)=>{var h=e(551).FDLayoutConstants;function n(){}T(n,"CoSEConstants");for(var m in h)n[m]=h[m];n.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,n.DEFAULT_RADIAL_SEPARATION=h.DEFAULT_EDGE_LENGTH,n.DEFAULT_COMPONENT_SEPERATION=60,n.TILE=!0,n.TILING_PADDING_VERTICAL=10,n.TILING_PADDING_HORIZONTAL=10,n.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,n.ENFORCE_CONSTRAINTS=!0,n.APPLY_LAYOUT=!0,n.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,n.TREE_REDUCTION_ON_INCREMENTAL=!0,n.PURE_INCREMENTAL=n.DEFAULT_INCREMENTAL,i.exports=n},767:(i,r,e)=>{var h=e(551).FDLayoutEdge;function n(o,t,d){h.call(this,o,t,d)}T(n,"CoSEEdge"),n.prototype=Object.create(h.prototype);for(var m in h)n[m]=h[m];i.exports=n},880:(i,r,e)=>{var h=e(551).LGraph;function n(o,t,d){h.call(this,o,t,d)}T(n,"CoSEGraph"),n.prototype=Object.create(h.prototype);for(var m in h)n[m]=h[m];i.exports=n},578:(i,r,e)=>{var h=e(551).LGraphManager;function n(o){h.call(this,o)}T(n,"CoSEGraphManager"),n.prototype=Object.create(h.prototype);for(var m in h)n[m]=h[m];i.exports=n},765:(i,r,e)=>{var h=e(551).FDLayout,n=e(578),m=e(880),o=e(991),t=e(767),d=e(806),f=e(902),l=e(551).FDLayoutConstants,N=e(551).LayoutConstants,c=e(551).Point,E=e(551).PointD,_=e(551).DimensionD,L=e(551).Layout,X=e(551).Integer,z=e(551).IGeometry,V=e(551).LGraph,B=e(551).Transform,q=e(551).LinkedList;function x(){h.call(this),this.toBeTiled={},this.constraints={}}T(x,"CoSELayout"),x.prototype=Object.create(h.prototype);for(var ne in h)x[ne]=h[ne];x.prototype.newGraphManager=function(){var a=new n(this);return this.graphManager=a,a},x.prototype.newGraph=function(a){return new m(null,this.graphManager,a)},x.prototype.newNode=function(a){return new o(this.graphManager,a)},x.prototype.newEdge=function(a){return new t(null,null,a)},x.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.isSubLayout||(d.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=d.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=d.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},x.prototype.initSpringEmbedder=function(){h.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/l.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},x.prototype.layout=function(){var a=N.DEFAULT_CREATE_BENDS_AS_NEEDED;return a&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(d.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),v=this.nodesWithGravity.filter(function(y){return a.has(y)});this.graphManager.setAllNodesToApplyGravitation(v)}}else{var p=this.getFlatForest();if(p.length>0)this.positionNodesRadially(p);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),v=this.nodesWithGravity.filter(function(D){return a.has(D)});this.graphManager.setAllNodesToApplyGravitation(v),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(f.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),d.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),v=this.nodesWithGravity.filter(function(g){return a.has(g)});this.graphManager.setAllNodesToApplyGravitation(v),this.graphManager.updateBounds(),this.updateGrid(),d.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),d.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var p=!this.isTreeGrowing&&!this.isGrowthFinished,y=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(p,y),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var a=this.graphManager.getAllNodes(),v={},p=0;p<a.length;p++){var y=a[p].rect,g=a[p].id;v[g]={id:g,x:y.getCenterX(),y:y.getCenterY(),w:y.width,h:y.height}}return v},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var a=!1;if(l.ANIMATE==="during")this.emit("layoutstarted");else{for(;!a;)a=this.tick();this.graphManager.updateBounds()}},x.prototype.moveNodes=function(){for(var a=this.getAllNodes(),v,p=0;p<a.length;p++)v=a[p],v.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var p=0;p<a.length;p++)v=a[p],v.move()},x.prototype.initConstraintVariables=function(){var a=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var v=this.graphManager.getAllNodes(),p=0;p<v.length;p++){var y=v[p];this.idToNodeMap.set(y.id,y)}var g=T(function b(F){for(var Z=F.getChild().getNodes(),re,ge=0,Ie=0;Ie<Z.length;Ie++)re=Z[Ie],re.getChild()==null?a.fixedNodeSet.has(re.id)&&(ge+=100):ge+=b(re);return ge},"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(b){a.fixedNodeSet.add(b.nodeId)});for(var v=this.graphManager.getAllNodes(),y,p=0;p<v.length;p++)if(y=v[p],y.getChild()!=null){var D=g(y);D>0&&(y.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,M=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(b){a.fixedNodesOnHorizontal.add(b),a.fixedNodesOnVertical.add(b)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var k=this.constraints.alignmentConstraint.vertical,p=0;p<k.length;p++)this.dummyToNodeForVerticalAlignment.set("dummy"+p,[]),k[p].forEach(function(F){O.set(F,"dummy"+p),a.dummyToNodeForVerticalAlignment.get("dummy"+p).push(F),a.fixedNodeSet.has(F)&&a.fixedNodesOnHorizontal.add("dummy"+p)});if(this.constraints.alignmentConstraint.horizontal)for(var U=this.constraints.alignmentConstraint.horizontal,p=0;p<U.length;p++)this.dummyToNodeForHorizontalAlignment.set("dummy"+p,[]),U[p].forEach(function(F){M.set(F,"dummy"+p),a.dummyToNodeForHorizontalAlignment.get("dummy"+p).push(F),a.fixedNodeSet.has(F)&&a.fixedNodesOnVertical.add("dummy"+p)})}if(d.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(b){var F,Z,re;for(re=b.length-1;re>=2*b.length/3;re--)F=Math.floor(Math.random()*(re+1)),Z=b[re],b[re]=b[F],b[F]=Z;return b},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(b){if(b.left){var F=O.has(b.left)?O.get(b.left):b.left,Z=O.has(b.right)?O.get(b.right):b.right;a.nodesInRelativeHorizontal.includes(F)||(a.nodesInRelativeHorizontal.push(F),a.nodeToRelativeConstraintMapHorizontal.set(F,[]),a.dummyToNodeForVerticalAlignment.has(F)?a.nodeToTempPositionMapHorizontal.set(F,a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(F)[0]).getCenterX()):a.nodeToTempPositionMapHorizontal.set(F,a.idToNodeMap.get(F).getCenterX())),a.nodesInRelativeHorizontal.includes(Z)||(a.nodesInRelativeHorizontal.push(Z),a.nodeToRelativeConstraintMapHorizontal.set(Z,[]),a.dummyToNodeForVerticalAlignment.has(Z)?a.nodeToTempPositionMapHorizontal.set(Z,a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(Z)[0]).getCenterX()):a.nodeToTempPositionMapHorizontal.set(Z,a.idToNodeMap.get(Z).getCenterX())),a.nodeToRelativeConstraintMapHorizontal.get(F).push({right:Z,gap:b.gap}),a.nodeToRelativeConstraintMapHorizontal.get(Z).push({left:F,gap:b.gap})}else{var re=M.has(b.top)?M.get(b.top):b.top,ge=M.has(b.bottom)?M.get(b.bottom):b.bottom;a.nodesInRelativeVertical.includes(re)||(a.nodesInRelativeVertical.push(re),a.nodeToRelativeConstraintMapVertical.set(re,[]),a.dummyToNodeForHorizontalAlignment.has(re)?a.nodeToTempPositionMapVertical.set(re,a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(re)[0]).getCenterY()):a.nodeToTempPositionMapVertical.set(re,a.idToNodeMap.get(re).getCenterY())),a.nodesInRelativeVertical.includes(ge)||(a.nodesInRelativeVertical.push(ge),a.nodeToRelativeConstraintMapVertical.set(ge,[]),a.dummyToNodeForHorizontalAlignment.has(ge)?a.nodeToTempPositionMapVertical.set(ge,a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(ge)[0]).getCenterY()):a.nodeToTempPositionMapVertical.set(ge,a.idToNodeMap.get(ge).getCenterY())),a.nodeToRelativeConstraintMapVertical.get(re).push({bottom:ge,gap:b.gap}),a.nodeToRelativeConstraintMapVertical.get(ge).push({top:re,gap:b.gap})}});else{var W=new Map,j=new Map;this.constraints.relativePlacementConstraint.forEach(function(b){if(b.left){var F=O.has(b.left)?O.get(b.left):b.left,Z=O.has(b.right)?O.get(b.right):b.right;W.has(F)?W.get(F).push(Z):W.set(F,[Z]),W.has(Z)?W.get(Z).push(F):W.set(Z,[F])}else{var re=M.has(b.top)?M.get(b.top):b.top,ge=M.has(b.bottom)?M.get(b.bottom):b.bottom;j.has(re)?j.get(re).push(ge):j.set(re,[ge]),j.has(ge)?j.get(ge).push(re):j.set(ge,[re])}});var Y=T(function(b,F){var Z=[],re=[],ge=new q,Ie=new Set,De=0;return b.forEach(function(S,ie){if(!Ie.has(ie)){Z[De]=[],re[De]=!1;var he=ie;for(ge.push(he),Ie.add(he),Z[De].push(he);ge.length!=0;){he=ge.shift(),F.has(he)&&(re[De]=!0);var ye=b.get(he);ye.forEach(function(Ce){Ie.has(Ce)||(ge.push(Ce),Ie.add(Ce),Z[De].push(Ce))})}De++}}),{components:Z,isFixed:re}},"constructComponents"),K=Y(W,a.fixedNodesOnHorizontal);this.componentsOnHorizontal=K.components,this.fixedComponentsOnHorizontal=K.isFixed;var P=Y(j,a.fixedNodesOnVertical);this.componentsOnVertical=P.components,this.fixedComponentsOnVertical=P.isFixed}}},x.prototype.updateDisplacements=function(){var a=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(P){var b=a.idToNodeMap.get(P.nodeId);b.displacementX=0,b.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var v=this.constraints.alignmentConstraint.vertical,p=0;p<v.length;p++){for(var y=0,g=0;g<v[p].length;g++){if(this.fixedNodeSet.has(v[p][g])){y=0;break}y+=this.idToNodeMap.get(v[p][g]).displacementX}for(var D=y/v[p].length,g=0;g<v[p].length;g++)this.idToNodeMap.get(v[p][g]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,p=0;p<O.length;p++){for(var M=0,g=0;g<O[p].length;g++){if(this.fixedNodeSet.has(O[p][g])){M=0;break}M+=this.idToNodeMap.get(O[p][g]).displacementY}for(var k=M/O[p].length,g=0;g<O[p].length;g++)this.idToNodeMap.get(O[p][g]).displacementY=k}}if(this.constraints.relativePlacementConstraint)if(d.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(P){if(!a.fixedNodesOnHorizontal.has(P)){var b=0;a.dummyToNodeForVerticalAlignment.has(P)?b=a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(P)[0]).displacementX:b=a.idToNodeMap.get(P).displacementX,a.nodeToRelativeConstraintMapHorizontal.get(P).forEach(function(F){if(F.right){var Z=a.nodeToTempPositionMapHorizontal.get(F.right)-a.nodeToTempPositionMapHorizontal.get(P)-b;Z<F.gap&&(b-=F.gap-Z)}else{var Z=a.nodeToTempPositionMapHorizontal.get(P)-a.nodeToTempPositionMapHorizontal.get(F.left)+b;Z<F.gap&&(b+=F.gap-Z)}}),a.nodeToTempPositionMapHorizontal.set(P,a.nodeToTempPositionMapHorizontal.get(P)+b),a.dummyToNodeForVerticalAlignment.has(P)?a.dummyToNodeForVerticalAlignment.get(P).forEach(function(F){a.idToNodeMap.get(F).displacementX=b}):a.idToNodeMap.get(P).displacementX=b}}),this.nodesInRelativeVertical.forEach(function(P){if(!a.fixedNodesOnHorizontal.has(P)){var b=0;a.dummyToNodeForHorizontalAlignment.has(P)?b=a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(P)[0]).displacementY:b=a.idToNodeMap.get(P).displacementY,a.nodeToRelativeConstraintMapVertical.get(P).forEach(function(F){if(F.bottom){var Z=a.nodeToTempPositionMapVertical.get(F.bottom)-a.nodeToTempPositionMapVertical.get(P)-b;Z<F.gap&&(b-=F.gap-Z)}else{var Z=a.nodeToTempPositionMapVertical.get(P)-a.nodeToTempPositionMapVertical.get(F.top)+b;Z<F.gap&&(b+=F.gap-Z)}}),a.nodeToTempPositionMapVertical.set(P,a.nodeToTempPositionMapVertical.get(P)+b),a.dummyToNodeForHorizontalAlignment.has(P)?a.dummyToNodeForHorizontalAlignment.get(P).forEach(function(F){a.idToNodeMap.get(F).displacementY=b}):a.idToNodeMap.get(P).displacementY=b}});else{for(var p=0;p<this.componentsOnHorizontal.length;p++){var U=this.componentsOnHorizontal[p];if(this.fixedComponentsOnHorizontal[p])for(var g=0;g<U.length;g++)this.dummyToNodeForVerticalAlignment.has(U[g])?this.dummyToNodeForVerticalAlignment.get(U[g]).forEach(function(F){a.idToNodeMap.get(F).displacementX=0}):this.idToNodeMap.get(U[g]).displacementX=0;else{for(var W=0,j=0,g=0;g<U.length;g++)if(this.dummyToNodeForVerticalAlignment.has(U[g])){var Y=this.dummyToNodeForVerticalAlignment.get(U[g]);W+=Y.length*this.idToNodeMap.get(Y[0]).displacementX,j+=Y.length}else W+=this.idToNodeMap.get(U[g]).displacementX,j++;for(var K=W/j,g=0;g<U.length;g++)this.dummyToNodeForVerticalAlignment.has(U[g])?this.dummyToNodeForVerticalAlignment.get(U[g]).forEach(function(F){a.idToNodeMap.get(F).displacementX=K}):this.idToNodeMap.get(U[g]).displacementX=K}}for(var p=0;p<this.componentsOnVertical.length;p++){var U=this.componentsOnVertical[p];if(this.fixedComponentsOnVertical[p])for(var g=0;g<U.length;g++)this.dummyToNodeForHorizontalAlignment.has(U[g])?this.dummyToNodeForHorizontalAlignment.get(U[g]).forEach(function(Z){a.idToNodeMap.get(Z).displacementY=0}):this.idToNodeMap.get(U[g]).displacementY=0;else{for(var W=0,j=0,g=0;g<U.length;g++)if(this.dummyToNodeForHorizontalAlignment.has(U[g])){var Y=this.dummyToNodeForHorizontalAlignment.get(U[g]);W+=Y.length*this.idToNodeMap.get(Y[0]).displacementY,j+=Y.length}else W+=this.idToNodeMap.get(U[g]).displacementY,j++;for(var K=W/j,g=0;g<U.length;g++)this.dummyToNodeForHorizontalAlignment.has(U[g])?this.dummyToNodeForHorizontalAlignment.get(U[g]).forEach(function(re){a.idToNodeMap.get(re).displacementY=K}):this.idToNodeMap.get(U[g]).displacementY=K}}}},x.prototype.calculateNodesToApplyGravitationTo=function(){var a=[],v,p=this.graphManager.getGraphs(),y=p.length,g;for(g=0;g<y;g++)v=p[g],v.updateConnected(),v.isConnected||(a=a.concat(v.getNodes()));return a},x.prototype.createBendpoints=function(){var a=[];a=a.concat(this.graphManager.getAllEdges());var v=new Set,p;for(p=0;p<a.length;p++){var y=a[p];if(!v.has(y)){var g=y.getSource(),D=y.getTarget();if(g==D)y.getBendpoints().push(new E),y.getBendpoints().push(new E),this.createDummyNodesForBendpoints(y),v.add(y);else{var O=[];if(O=O.concat(g.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(g)),!v.has(O[0])){if(O.length>1){var M;for(M=0;M<O.length;M++){var k=O[M];k.getBendpoints().push(new E),this.createDummyNodesForBendpoints(k)}}O.forEach(function(U){v.add(U)})}}}if(v.size==a.length)break}},x.prototype.positionNodesRadially=function(a){for(var v=new c(0,0),p=Math.ceil(Math.sqrt(a.length)),y=0,g=0,D=0,O=new E(0,0),M=0;M<a.length;M++){M%p==0&&(D=0,g=y,M!=0&&(g+=d.DEFAULT_COMPONENT_SEPERATION),y=0);var k=a[M],U=L.findCenterOfTree(k);v.x=D,v.y=g,O=x.radialLayout(k,U,v),O.y>y&&(y=Math.floor(O.y)),D=Math.floor(O.x+d.DEFAULT_COMPONENT_SEPERATION)}this.transform(new E(N.WORLD_CENTER_X-O.x/2,N.WORLD_CENTER_Y-O.y/2))},x.radialLayout=function(a,v,p){var y=Math.max(this.maxDiagonalInTree(a),d.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(v,null,0,359,0,y);var g=V.calculateBounds(a),D=new B;D.setDeviceOrgX(g.getMinX()),D.setDeviceOrgY(g.getMinY()),D.setWorldOrgX(p.x),D.setWorldOrgY(p.y);for(var O=0;O<a.length;O++){var M=a[O];M.transform(D)}var k=new E(g.getMaxX(),g.getMaxY());return D.inverseTransformPoint(k)},x.branchRadialLayout=function(a,v,p,y,g,D){var O=(y-p+1)/2;O<0&&(O+=180);var M=(O+p)%360,k=M*z.TWO_PI/360,U=g*Math.cos(k),W=g*Math.sin(k);a.setCenter(U,W);var j=[];j=j.concat(a.getEdges());var Y=j.length;v!=null&&Y--;for(var K=0,P=j.length,b,F=a.getEdgesBetween(v);F.length>1;){var Z=F[0];F.splice(0,1);var re=j.indexOf(Z);re>=0&&j.splice(re,1),P--,Y--}v!=null?b=(j.indexOf(F[0])+1)%P:b=0;for(var ge=Math.abs(y-p)/Y,Ie=b;K!=Y;Ie=++Ie%P){var De=j[Ie].getOtherEnd(a);if(De!=v){var S=(p+K*ge)%360,ie=(S+ge)%360;x.branchRadialLayout(De,a,S,ie,g+D,D),K++}}},x.maxDiagonalInTree=function(a){for(var v=X.MIN_VALUE,p=0;p<a.length;p++){var y=a[p],g=y.getDiagonal();g>v&&(v=g)}return v},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var a=this,v={};this.memberGroups={},this.idToDummyNode={};for(var p=[],y=this.graphManager.getAllNodes(),g=0;g<y.length;g++){var D=y[g],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&p.push(D)}for(var g=0;g<p.length;g++){var D=p[g],M=D.getParent().id;typeof v[M]>"u"&&(v[M]=[]),v[M]=v[M].concat(D)}Object.keys(v).forEach(function(k){if(v[k].length>1){var U="DummyCompound_"+k;a.memberGroups[U]=v[k];var W=v[k][0].getParent(),j=new o(a.graphManager);j.id=U,j.paddingLeft=W.paddingLeft||0,j.paddingRight=W.paddingRight||0,j.paddingBottom=W.paddingBottom||0,j.paddingTop=W.paddingTop||0,a.idToDummyNode[U]=j;var Y=a.getGraphManager().add(a.newGraph(),j),K=W.getChild();K.add(j);for(var P=0;P<v[k].length;P++){var b=v[k][P];K.remove(b),Y.add(b)}}})},x.prototype.clearCompounds=function(){var a={},v={};this.performDFSOnCompounds();for(var p=0;p<this.compoundOrder.length;p++)v[this.compoundOrder[p].id]=this.compoundOrder[p],a[this.compoundOrder[p].id]=[].concat(this.compoundOrder[p].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[p].getChild()),this.compoundOrder[p].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(a,v)},x.prototype.clearZeroDegreeMembers=function(){var a=this,v=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(p){var y=a.idToDummyNode[p];if(v[p]=a.tileNodes(a.memberGroups[p],y.paddingLeft+y.paddingRight),y.rect.width=v[p].width,y.rect.height=v[p].height,y.setCenter(v[p].centerX,v[p].centerY),y.labelMarginLeft=0,y.labelMarginTop=0,d.NODE_DIMENSIONS_INCLUDE_LABELS){var g=y.rect.width,D=y.rect.height;y.labelWidth&&(y.labelPosHorizontal=="left"?(y.rect.x-=y.labelWidth,y.setWidth(g+y.labelWidth),y.labelMarginLeft=y.labelWidth):y.labelPosHorizontal=="center"&&y.labelWidth>g?(y.rect.x-=(y.labelWidth-g)/2,y.setWidth(y.labelWidth),y.labelMarginLeft=(y.labelWidth-g)/2):y.labelPosHorizontal=="right"&&y.setWidth(g+y.labelWidth)),y.labelHeight&&(y.labelPosVertical=="top"?(y.rect.y-=y.labelHeight,y.setHeight(D+y.labelHeight),y.labelMarginTop=y.labelHeight):y.labelPosVertical=="center"&&y.labelHeight>D?(y.rect.y-=(y.labelHeight-D)/2,y.setHeight(y.labelHeight),y.labelMarginTop=(y.labelHeight-D)/2):y.labelPosVertical=="bottom"&&y.setHeight(D+y.labelHeight))}})},x.prototype.repopulateCompounds=function(){for(var a=this.compoundOrder.length-1;a>=0;a--){var v=this.compoundOrder[a],p=v.id,y=v.paddingLeft,g=v.paddingTop,D=v.labelMarginLeft,O=v.labelMarginTop;this.adjustLocations(this.tiledMemberPack[p],v.rect.x,v.rect.y,y,g,D,O)}},x.prototype.repopulateZeroDegreeMembers=function(){var a=this,v=this.tiledZeroDegreePack;Object.keys(v).forEach(function(p){var y=a.idToDummyNode[p],g=y.paddingLeft,D=y.paddingTop,O=y.labelMarginLeft,M=y.labelMarginTop;a.adjustLocations(v[p],y.rect.x,y.rect.y,g,D,O,M)})},x.prototype.getToBeTiled=function(a){var v=a.id;if(this.toBeTiled[v]!=null)return this.toBeTiled[v];var p=a.getChild();if(p==null)return this.toBeTiled[v]=!1,!1;for(var y=p.getNodes(),g=0;g<y.length;g++){var D=y[g];if(this.getNodeDegree(D)>0)return this.toBeTiled[v]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[v]=!1,!1}return this.toBeTiled[v]=!0,!0},x.prototype.getNodeDegree=function(a){for(var v=a.id,p=a.getEdges(),y=0,g=0;g<p.length;g++){var D=p[g];D.getSource().id!==D.getTarget().id&&(y=y+1)}return y},x.prototype.getNodeDegreeWithChildren=function(a){var v=this.getNodeDegree(a);if(a.getChild()==null)return v;for(var p=a.getChild().getNodes(),y=0;y<p.length;y++){var g=p[y];v+=this.getNodeDegreeWithChildren(g)}return v},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(a){for(var v=0;v<a.length;v++){var p=a[v];p.getChild()!=null&&this.fillCompexOrderByDFS(p.getChild().getNodes()),this.getToBeTiled(p)&&this.compoundOrder.push(p)}},x.prototype.adjustLocations=function(a,v,p,y,g,D,O){v+=y+D,p+=g+O;for(var M=v,k=0;k<a.rows.length;k++){var U=a.rows[k];v=M;for(var W=0,j=0;j<U.length;j++){var Y=U[j];Y.rect.x=v,Y.rect.y=p,v+=Y.rect.width+a.horizontalPadding,Y.rect.height>W&&(W=Y.rect.height)}p+=W+a.verticalPadding}},x.prototype.tileCompoundMembers=function(a,v){var p=this;this.tiledMemberPack=[],Object.keys(a).forEach(function(y){var g=v[y];if(p.tiledMemberPack[y]=p.tileNodes(a[y],g.paddingLeft+g.paddingRight),g.rect.width=p.tiledMemberPack[y].width,g.rect.height=p.tiledMemberPack[y].height,g.setCenter(p.tiledMemberPack[y].centerX,p.tiledMemberPack[y].centerY),g.labelMarginLeft=0,g.labelMarginTop=0,d.NODE_DIMENSIONS_INCLUDE_LABELS){var D=g.rect.width,O=g.rect.height;g.labelWidth&&(g.labelPosHorizontal=="left"?(g.rect.x-=g.labelWidth,g.setWidth(D+g.labelWidth),g.labelMarginLeft=g.labelWidth):g.labelPosHorizontal=="center"&&g.labelWidth>D?(g.rect.x-=(g.labelWidth-D)/2,g.setWidth(g.labelWidth),g.labelMarginLeft=(g.labelWidth-D)/2):g.labelPosHorizontal=="right"&&g.setWidth(D+g.labelWidth)),g.labelHeight&&(g.labelPosVertical=="top"?(g.rect.y-=g.labelHeight,g.setHeight(O+g.labelHeight),g.labelMarginTop=g.labelHeight):g.labelPosVertical=="center"&&g.labelHeight>O?(g.rect.y-=(g.labelHeight-O)/2,g.setHeight(g.labelHeight),g.labelMarginTop=(g.labelHeight-O)/2):g.labelPosVertical=="bottom"&&g.setHeight(O+g.labelHeight))}})},x.prototype.tileNodes=function(a,v){var p=this.tileNodesByFavoringDim(a,v,!0),y=this.tileNodesByFavoringDim(a,v,!1),g=this.getOrgRatio(p),D=this.getOrgRatio(y),O;return D<g?O=y:O=p,O},x.prototype.getOrgRatio=function(a){var v=a.width,p=a.height,y=v/p;return y<1&&(y=1/y),y},x.prototype.calcIdealRowWidth=function(a,v){var p=d.TILING_PADDING_VERTICAL,y=d.TILING_PADDING_HORIZONTAL,g=a.length,D=0,O=0,M=0;a.forEach(function(P){D+=P.getWidth(),O+=P.getHeight(),P.getWidth()>M&&(M=P.getWidth())});var k=D/g,U=O/g,W=Math.pow(p-y,2)+4*(k+y)*(U+p)*g,j=(y-p+Math.sqrt(W))/(2*(k+y)),Y;v?(Y=Math.ceil(j),Y==j&&Y++):Y=Math.floor(j);var K=Y*(k+y)-y;return M>K&&(K=M),K+=y*2,K},x.prototype.tileNodesByFavoringDim=function(a,v,p){var y=d.TILING_PADDING_VERTICAL,g=d.TILING_PADDING_HORIZONTAL,D=d.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:v,verticalPadding:y,horizontalPadding:g,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(a,p));var M=T(function(P){return P.rect.width*P.rect.height},"getNodeArea"),k=T(function(P,b){return M(b)-M(P)},"areaCompareFcn");a.sort(function(P,b){var F=k;return O.idealRowWidth?(F=D,F(P.id,b.id)):F(P,b)});for(var U=0,W=0,j=0;j<a.length;j++){var Y=a[j];U+=Y.getCenterX(),W+=Y.getCenterY()}O.centerX=U/a.length,O.centerY=W/a.length;for(var j=0;j<a.length;j++){var Y=a[j];if(O.rows.length==0)this.insertNodeToRow(O,Y,0,v);else if(this.canAddHorizontal(O,Y.rect.width,Y.rect.height)){var K=O.rows.length-1;O.idealRowWidth||(K=this.getShortestRowIndex(O)),this.insertNodeToRow(O,Y,K,v)}else this.insertNodeToRow(O,Y,O.rows.length,v);this.shiftToLastRow(O)}return O},x.prototype.insertNodeToRow=function(a,v,p,y){var g=y;if(p==a.rows.length){var D=[];a.rows.push(D),a.rowWidth.push(g),a.rowHeight.push(0)}var O=a.rowWidth[p]+v.rect.width;a.rows[p].length>0&&(O+=a.horizontalPadding),a.rowWidth[p]=O,a.width<O&&(a.width=O);var M=v.rect.height;p>0&&(M+=a.verticalPadding);var k=0;M>a.rowHeight[p]&&(k=a.rowHeight[p],a.rowHeight[p]=M,k=a.rowHeight[p]-k),a.height+=k,a.rows[p].push(v)},x.prototype.getShortestRowIndex=function(a){for(var v=-1,p=Number.MAX_VALUE,y=0;y<a.rows.length;y++)a.rowWidth[y]<p&&(v=y,p=a.rowWidth[y]);return v},x.prototype.getLongestRowIndex=function(a){for(var v=-1,p=Number.MIN_VALUE,y=0;y<a.rows.length;y++)a.rowWidth[y]>p&&(v=y,p=a.rowWidth[y]);return v},x.prototype.canAddHorizontal=function(a,v,p){if(a.idealRowWidth){var y=a.rows.length-1,g=a.rowWidth[y];return g+v+a.horizontalPadding<=a.idealRowWidth}var D=this.getShortestRowIndex(a);if(D<0)return!0;var O=a.rowWidth[D];if(O+a.horizontalPadding+v<=a.width)return!0;var M=0;a.rowHeight[D]<p&&D>0&&(M=p+a.verticalPadding-a.rowHeight[D]);var k;a.width-O>=v+a.horizontalPadding?k=(a.height+M)/(O+v+a.horizontalPadding):k=(a.height+M)/a.width,M=p+a.verticalPadding;var U;return a.width<v?U=(a.height+M)/v:U=(a.height+M)/a.width,U<1&&(U=1/U),k<1&&(k=1/k),k<U},x.prototype.shiftToLastRow=function(a){var v=this.getLongestRowIndex(a),p=a.rowWidth.length-1,y=a.rows[v],g=y[y.length-1],D=g.width+a.horizontalPadding;if(a.width-a.rowWidth[p]>D&&v!=p){y.splice(-1,1),a.rows[p].push(g),a.rowWidth[v]=a.rowWidth[v]-D,a.rowWidth[p]=a.rowWidth[p]+D,a.width=a.rowWidth[instance.getLongestRowIndex(a)];for(var O=Number.MIN_VALUE,M=0;M<y.length;M++)y[M].height>O&&(O=y[M].height);v>0&&(O+=a.verticalPadding);var k=a.rowHeight[v]+a.rowHeight[p];a.rowHeight[v]=O,a.rowHeight[p]<g.height+a.verticalPadding&&(a.rowHeight[p]=g.height+a.verticalPadding);var U=a.rowHeight[v]+a.rowHeight[p];a.height+=U-k,this.shiftToLastRow(a)}},x.prototype.tilingPreLayout=function(){d.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){d.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var a=[],v=!0,p;v;){var y=this.graphManager.getAllNodes(),g=[];v=!1;for(var D=0;D<y.length;D++)if(p=y[D],p.getEdges().length==1&&!p.getEdges()[0].isInterGraph&&p.getChild()==null){if(d.PURE_INCREMENTAL){var O=p.getEdges()[0].getOtherEnd(p),M=new _(p.getCenterX()-O.getCenterX(),p.getCenterY()-O.getCenterY());g.push([p,p.getEdges()[0],p.getOwner(),M])}else g.push([p,p.getEdges()[0],p.getOwner()]);v=!0}if(v==!0){for(var k=[],U=0;U<g.length;U++)g[U][0].getEdges().length==1&&(k.push(g[U]),g[U][0].getOwner().remove(g[U][0]));a.push(k),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=a},x.prototype.growTree=function(a){for(var v=a.length,p=a[v-1],y,g=0;g<p.length;g++)y=p[g],this.findPlaceforPrunedNode(y),y[2].add(y[0]),y[2].add(y[1],y[1].source,y[1].target);a.splice(a.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(a){var v,p,y=a[0];if(y==a[1].source?p=a[1].target:p=a[1].source,d.PURE_INCREMENTAL)y.setCenter(p.getCenterX()+a[3].getWidth(),p.getCenterY()+a[3].getHeight());else{var g=p.startX,D=p.finishX,O=p.startY,M=p.finishY,k=0,U=0,W=0,j=0,Y=[k,W,U,j];if(O>0)for(var K=g;K<=D;K++)Y[0]+=this.grid[K][O-1].length+this.grid[K][O].length-1;if(D<this.grid.length-1)for(var K=O;K<=M;K++)Y[1]+=this.grid[D+1][K].length+this.grid[D][K].length-1;if(M<this.grid[0].length-1)for(var K=g;K<=D;K++)Y[2]+=this.grid[K][M+1].length+this.grid[K][M].length-1;if(g>0)for(var K=O;K<=M;K++)Y[3]+=this.grid[g-1][K].length+this.grid[g][K].length-1;for(var P=X.MAX_VALUE,b,F,Z=0;Z<Y.length;Z++)Y[Z]<P?(P=Y[Z],b=1,F=Z):Y[Z]==P&&b++;if(b==3&&P==0)Y[0]==0&&Y[1]==0&&Y[2]==0?v=1:Y[0]==0&&Y[1]==0&&Y[3]==0?v=0:Y[0]==0&&Y[2]==0&&Y[3]==0?v=3:Y[1]==0&&Y[2]==0&&Y[3]==0&&(v=2);else if(b==2&&P==0){var re=Math.floor(Math.random()*2);Y[0]==0&&Y[1]==0?re==0?v=0:v=1:Y[0]==0&&Y[2]==0?re==0?v=0:v=2:Y[0]==0&&Y[3]==0?re==0?v=0:v=3:Y[1]==0&&Y[2]==0?re==0?v=1:v=2:Y[1]==0&&Y[3]==0?re==0?v=1:v=3:re==0?v=2:v=3}else if(b==4&&P==0){var re=Math.floor(Math.random()*4);v=re}else v=F;v==0?y.setCenter(p.getCenterX(),p.getCenterY()-p.getHeight()/2-l.DEFAULT_EDGE_LENGTH-y.getHeight()/2):v==1?y.setCenter(p.getCenterX()+p.getWidth()/2+l.DEFAULT_EDGE_LENGTH+y.getWidth()/2,p.getCenterY()):v==2?y.setCenter(p.getCenterX(),p.getCenterY()+p.getHeight()/2+l.DEFAULT_EDGE_LENGTH+y.getHeight()/2):y.setCenter(p.getCenterX()-p.getWidth()/2-l.DEFAULT_EDGE_LENGTH-y.getWidth()/2,p.getCenterY())}},i.exports=x},991:(i,r,e)=>{var h=e(551).FDLayoutNode,n=e(551).IMath;function m(t,d,f,l){h.call(this,t,d,f,l)}T(m,"CoSENode"),m.prototype=Object.create(h.prototype);for(var o in h)m[o]=h[o];m.prototype.calculateDisplacement=function(){var t=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=t.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=t.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementX=t.coolingFactor*t.maxNodeDisplacement*n.sign(this.displacementX)),Math.abs(this.displacementY)>t.coolingFactor*t.maxNodeDisplacement&&(this.displacementY=t.coolingFactor*t.maxNodeDisplacement*n.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},m.prototype.propogateDisplacementToChildren=function(t,d){for(var f=this.getChild().getNodes(),l,N=0;N<f.length;N++)l=f[N],l.getChild()==null?(l.displacementX+=t,l.displacementY+=d):l.propogateDisplacementToChildren(t,d)},m.prototype.move=function(){var t=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),t.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},m.prototype.setPred1=function(t){this.pred1=t},m.prototype.getPred1=function(){return pred1},m.prototype.getPred2=function(){return pred2},m.prototype.setNext=function(t){this.next=t},m.prototype.getNext=function(){return next},m.prototype.setProcessed=function(t){this.processed=t},m.prototype.isProcessed=function(){return processed},i.exports=m},902:(i,r,e)=>{function h(f){if(Array.isArray(f)){for(var l=0,N=Array(f.length);l<f.length;l++)N[l]=f[l];return N}else return Array.from(f)}T(h,"_toConsumableArray");var n=e(806),m=e(551).LinkedList,o=e(551).Matrix,t=e(551).SVD;function d(){}T(d,"ConstraintHandler"),d.handleConstraints=function(f){var l={};l.fixedNodeConstraint=f.constraints.fixedNodeConstraint,l.alignmentConstraint=f.constraints.alignmentConstraint,l.relativePlacementConstraint=f.constraints.relativePlacementConstraint;for(var N=new Map,c=new Map,E=[],_=[],L=f.getAllNodes(),X=0,z=0;z<L.length;z++){var V=L[z];V.getChild()==null&&(c.set(V.id,X++),E.push(V.getCenterX()),_.push(V.getCenterY()),N.set(V.id,V))}l.relativePlacementConstraint&&l.relativePlacementConstraint.forEach(function(I){!I.gap&&I.gap!=0&&(I.left?I.gap=n.DEFAULT_EDGE_LENGTH+N.get(I.left).getWidth()/2+N.get(I.right).getWidth()/2:I.gap=n.DEFAULT_EDGE_LENGTH+N.get(I.top).getHeight()/2+N.get(I.bottom).getHeight()/2)});var B=T(function(I,R){return{x:I.x-R.x,y:I.y-R.y}},"calculatePositionDiff"),q=T(function(I){var R=0,$=0;return I.forEach(function(J){R+=E[c.get(J)],$+=_[c.get(J)]}),{x:R/I.size,y:$/I.size}},"calculateAvgPosition"),x=T(function(I,R,$,J,Q){function pe(oe,se){var ae=new Set(oe),Te=!0,fe=!1,be=void 0;try{for(var Re=se[Symbol.iterator](),Ge;!(Te=(Ge=Re.next()).done);Te=!0){var je=Ge.value;ae.add(je)}}catch(Ae){fe=!0,be=Ae}finally{try{!Te&&Re.return&&Re.return()}finally{if(fe)throw be}}return ae}T(pe,"setUnion");var de=new Map;I.forEach(function(oe,se){de.set(se,0)}),I.forEach(function(oe,se){oe.forEach(function(ae){de.set(ae.id,de.get(ae.id)+1)})});var ee=new Map,ue=new Map,Ne=new m;de.forEach(function(oe,se){oe==0?(Ne.push(se),$||(R=="horizontal"?ee.set(se,c.has(se)?E[c.get(se)]:J.get(se)):ee.set(se,c.has(se)?_[c.get(se)]:J.get(se)))):ee.set(se,Number.NEGATIVE_INFINITY),$&&ue.set(se,new Set([se]))}),$&&Q.forEach(function(oe){var se=[];if(oe.forEach(function(fe){$.has(fe)&&se.push(fe)}),se.length>0){var ae=0;se.forEach(function(fe){R=="horizontal"?(ee.set(fe,c.has(fe)?E[c.get(fe)]:J.get(fe)),ae+=ee.get(fe)):(ee.set(fe,c.has(fe)?_[c.get(fe)]:J.get(fe)),ae+=ee.get(fe))}),ae=ae/se.length,oe.forEach(function(fe){$.has(fe)||ee.set(fe,ae)})}else{var Te=0;oe.forEach(function(fe){R=="horizontal"?Te+=c.has(fe)?E[c.get(fe)]:J.get(fe):Te+=c.has(fe)?_[c.get(fe)]:J.get(fe)}),Te=Te/oe.length,oe.forEach(function(fe){ee.set(fe,Te)})}});for(var _e=T(function(){var oe=Ne.shift(),se=I.get(oe);se.forEach(function(ae){if(ee.get(ae.id)<ee.get(oe)+ae.gap)if($&&$.has(ae.id)){var Te=void 0;if(R=="horizontal"?Te=c.has(ae.id)?E[c.get(ae.id)]:J.get(ae.id):Te=c.has(ae.id)?_[c.get(ae.id)]:J.get(ae.id),ee.set(ae.id,Te),Te<ee.get(oe)+ae.gap){var fe=ee.get(oe)+ae.gap-Te;ue.get(oe).forEach(function(be){ee.set(be,ee.get(be)-fe)})}}else ee.set(ae.id,ee.get(oe)+ae.gap);de.set(ae.id,de.get(ae.id)-1),de.get(ae.id)==0&&Ne.push(ae.id),$&&ue.set(ae.id,pe(ue.get(oe),ue.get(ae.id)))})},"_loop");Ne.length!=0;)_e();if($){var te=new Set;I.forEach(function(oe,se){oe.length==0&&te.add(se)});var Oe=[];ue.forEach(function(oe,se){if(te.has(se)){var ae=!1,Te=!0,fe=!1,be=void 0;try{for(var Re=oe[Symbol.iterator](),Ge;!(Te=(Ge=Re.next()).done);Te=!0){var je=Ge.value;$.has(je)&&(ae=!0)}}catch(Fe){fe=!0,be=Fe}finally{try{!Te&&Re.return&&Re.return()}finally{if(fe)throw be}}if(!ae){var Ae=!1,we=void 0;Oe.forEach(function(Fe,Pe){Fe.has([].concat(h(oe))[0])&&(Ae=!0,we=Pe)}),Ae?oe.forEach(function(Fe){Oe[we].add(Fe)}):Oe.push(new Set(oe))}}}),Oe.forEach(function(oe,se){var ae=Number.POSITIVE_INFINITY,Te=Number.POSITIVE_INFINITY,fe=Number.NEGATIVE_INFINITY,be=Number.NEGATIVE_INFINITY,Re=!0,Ge=!1,je=void 0;try{for(var Ae=oe[Symbol.iterator](),we;!(Re=(we=Ae.next()).done);Re=!0){var Fe=we.value,Pe=void 0;R=="horizontal"?Pe=c.has(Fe)?E[c.get(Fe)]:J.get(Fe):Pe=c.has(Fe)?_[c.get(Fe)]:J.get(Fe);var Be=ee.get(Fe);Pe<ae&&(ae=Pe),Pe>fe&&(fe=Pe),Be<Te&&(Te=Be),Be>be&&(be=Be)}}catch(Ke){Ge=!0,je=Ke}finally{try{!Re&&Ae.return&&Ae.return()}finally{if(Ge)throw je}}var qe=(ae+fe)/2-(Te+be)/2,nt=!0,Qe=!1,et=void 0;try{for(var Je=oe[Symbol.iterator](),tt;!(nt=(tt=Je.next()).done);nt=!0){var at=tt.value;ee.set(at,ee.get(at)+qe)}}catch(Ke){Qe=!0,et=Ke}finally{try{!nt&&Je.return&&Je.return()}finally{if(Qe)throw et}}})}return ee},"findAppropriatePositionForRelativePlacement"),ne=T(function(I){var R=0,$=0,J=0,Q=0;if(I.forEach(function(ue){ue.left?E[c.get(ue.left)]-E[c.get(ue.right)]>=0?R++:$++:_[c.get(ue.top)]-_[c.get(ue.bottom)]>=0?J++:Q++}),R>$&&J>Q)for(var pe=0;pe<c.size;pe++)E[pe]=-1*E[pe],_[pe]=-1*_[pe];else if(R>$)for(var de=0;de<c.size;de++)E[de]=-1*E[de];else if(J>Q)for(var ee=0;ee<c.size;ee++)_[ee]=-1*_[ee]},"applyReflectionForRelativePlacement"),a=T(function(I){var R=[],$=new m,J=new Set,Q=0;return I.forEach(function(pe,de){if(!J.has(de)){R[Q]=[];var ee=de;for($.push(ee),J.add(ee),R[Q].push(ee);$.length!=0;){ee=$.shift();var ue=I.get(ee);ue.forEach(function(Ne){J.has(Ne.id)||($.push(Ne.id),J.add(Ne.id),R[Q].push(Ne.id))})}Q++}}),R},"findComponents"),v=T(function(I){var R=new Map;return I.forEach(function($,J){R.set(J,[])}),I.forEach(function($,J){$.forEach(function(Q){R.get(J).push(Q),R.get(Q.id).push({id:J,gap:Q.gap,direction:Q.direction})})}),R},"dagToUndirected"),p=T(function(I){var R=new Map;return I.forEach(function($,J){R.set(J,[])}),I.forEach(function($,J){$.forEach(function(Q){R.get(Q.id).push({id:J,gap:Q.gap,direction:Q.direction})})}),R},"dagToReversed"),y=[],g=[],D=!1,O=!1,M=new Set,k=new Map,U=new Map,W=[];if(l.fixedNodeConstraint&&l.fixedNodeConstraint.forEach(function(I){M.add(I.nodeId)}),l.relativePlacementConstraint&&(l.relativePlacementConstraint.forEach(function(I){I.left?(k.has(I.left)?k.get(I.left).push({id:I.right,gap:I.gap,direction:"horizontal"}):k.set(I.left,[{id:I.right,gap:I.gap,direction:"horizontal"}]),k.has(I.right)||k.set(I.right,[])):(k.has(I.top)?k.get(I.top).push({id:I.bottom,gap:I.gap,direction:"vertical"}):k.set(I.top,[{id:I.bottom,gap:I.gap,direction:"vertical"}]),k.has(I.bottom)||k.set(I.bottom,[]))}),U=v(k),W=a(U)),n.TRANSFORM_ON_CONSTRAINT_HANDLING){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>1)l.fixedNodeConstraint.forEach(function(I,R){y[R]=[I.position.x,I.position.y],g[R]=[E[c.get(I.nodeId)],_[c.get(I.nodeId)]]}),D=!0;else if(l.alignmentConstraint)(function(){var I=0;if(l.alignmentConstraint.vertical){for(var R=l.alignmentConstraint.vertical,$=T(function(ee){var ue=new Set;R[ee].forEach(function(te){ue.add(te)});var Ne=new Set([].concat(h(ue)).filter(function(te){return M.has(te)})),_e=void 0;Ne.size>0?_e=E[c.get(Ne.values().next().value)]:_e=q(ue).x,R[ee].forEach(function(te){y[I]=[_e,_[c.get(te)]],g[I]=[E[c.get(te)],_[c.get(te)]],I++})},"_loop2"),J=0;J<R.length;J++)$(J);D=!0}if(l.alignmentConstraint.horizontal){for(var Q=l.alignmentConstraint.horizontal,pe=T(function(ee){var ue=new Set;Q[ee].forEach(function(te){ue.add(te)});var Ne=new Set([].concat(h(ue)).filter(function(te){return M.has(te)})),_e=void 0;Ne.size>0?_e=E[c.get(Ne.values().next().value)]:_e=q(ue).y,Q[ee].forEach(function(te){y[I]=[E[c.get(te)],_e],g[I]=[E[c.get(te)],_[c.get(te)]],I++})},"_loop3"),de=0;de<Q.length;de++)pe(de);D=!0}l.relativePlacementConstraint&&(O=!0)})();else if(l.relativePlacementConstraint){for(var j=0,Y=0,K=0;K<W.length;K++)W[K].length>j&&(j=W[K].length,Y=K);if(j<U.size/2)ne(l.relativePlacementConstraint),D=!1,O=!1;else{var P=new Map,b=new Map,F=[];W[Y].forEach(function(I){k.get(I).forEach(function(R){R.direction=="horizontal"?(P.has(I)?P.get(I).push(R):P.set(I,[R]),P.has(R.id)||P.set(R.id,[]),F.push({left:I,right:R.id})):(b.has(I)?b.get(I).push(R):b.set(I,[R]),b.has(R.id)||b.set(R.id,[]),F.push({top:I,bottom:R.id}))})}),ne(F),O=!1;var Z=x(P,"horizontal"),re=x(b,"vertical");W[Y].forEach(function(I,R){g[R]=[E[c.get(I)],_[c.get(I)]],y[R]=[],Z.has(I)?y[R][0]=Z.get(I):y[R][0]=E[c.get(I)],re.has(I)?y[R][1]=re.get(I):y[R][1]=_[c.get(I)]}),D=!0}}if(D){for(var ge=void 0,Ie=o.transpose(y),De=o.transpose(g),S=0;S<Ie.length;S++)Ie[S]=o.multGamma(Ie[S]),De[S]=o.multGamma(De[S]);var ie=o.multMat(Ie,o.transpose(De)),he=t.svd(ie);ge=o.multMat(he.V,o.transpose(he.U));for(var ye=0;ye<c.size;ye++){var Ce=[E[ye],_[ye]],ve=[ge[0][0],ge[1][0]],Ee=[ge[0][1],ge[1][1]];E[ye]=o.dotProduct(Ce,ve),_[ye]=o.dotProduct(Ce,Ee)}O&&ne(l.relativePlacementConstraint)}}if(n.ENFORCE_CONSTRAINTS){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>0){var xe={x:0,y:0};l.fixedNodeConstraint.forEach(function(I,R){var $={x:E[c.get(I.nodeId)],y:_[c.get(I.nodeId)]},J=I.position,Q=B(J,$);xe.x+=Q.x,xe.y+=Q.y}),xe.x/=l.fixedNodeConstraint.length,xe.y/=l.fixedNodeConstraint.length,E.forEach(function(I,R){E[R]+=xe.x}),_.forEach(function(I,R){_[R]+=xe.y}),l.fixedNodeConstraint.forEach(function(I){E[c.get(I.nodeId)]=I.position.x,_[c.get(I.nodeId)]=I.position.y})}if(l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var Ve=l.alignmentConstraint.vertical,Ue=T(function(I){var R=new Set;Ve[I].forEach(function(Q){R.add(Q)});var $=new Set([].concat(h(R)).filter(function(Q){return M.has(Q)})),J=void 0;$.size>0?J=E[c.get($.values().next().value)]:J=q(R).x,R.forEach(function(Q){M.has(Q)||(E[c.get(Q)]=J)})},"_loop4"),ke=0;ke<Ve.length;ke++)Ue(ke);if(l.alignmentConstraint.horizontal)for(var Me=l.alignmentConstraint.horizontal,Xe=T(function(I){var R=new Set;Me[I].forEach(function(Q){R.add(Q)});var $=new Set([].concat(h(R)).filter(function(Q){return M.has(Q)})),J=void 0;$.size>0?J=_[c.get($.values().next().value)]:J=q(R).y,R.forEach(function(Q){M.has(Q)||(_[c.get(Q)]=J)})},"_loop5"),Ye=0;Ye<Me.length;Ye++)Xe(Ye)}l.relativePlacementConstraint&&function(){var I=new Map,R=new Map,$=new Map,J=new Map,Q=new Map,pe=new Map,de=new Set,ee=new Set;if(M.forEach(function(ce){de.add(ce),ee.add(ce)}),l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var ue=l.alignmentConstraint.vertical,Ne=T(function(ce){$.set("dummy"+ce,[]),ue[ce].forEach(function(Le){I.set(Le,"dummy"+ce),$.get("dummy"+ce).push(Le),M.has(Le)&&de.add("dummy"+ce)}),Q.set("dummy"+ce,E[c.get(ue[ce][0])])},"_loop6"),_e=0;_e<ue.length;_e++)Ne(_e);if(l.alignmentConstraint.horizontal)for(var te=l.alignmentConstraint.horizontal,Oe=T(function(ce){J.set("dummy"+ce,[]),te[ce].forEach(function(Le){R.set(Le,"dummy"+ce),J.get("dummy"+ce).push(Le),M.has(Le)&&ee.add("dummy"+ce)}),pe.set("dummy"+ce,_[c.get(te[ce][0])])},"_loop7"),oe=0;oe<te.length;oe++)Oe(oe)}var se=new Map,ae=new Map,Te=T(function(ce){k.get(ce).forEach(function(Le){var ze=void 0,We=void 0;Le.direction=="horizontal"?(ze=I.get(ce)?I.get(ce):ce,I.get(Le.id)?We={id:I.get(Le.id),gap:Le.gap,direction:Le.direction}:We=Le,se.has(ze)?se.get(ze).push(We):se.set(ze,[We]),se.has(We.id)||se.set(We.id,[])):(ze=R.get(ce)?R.get(ce):ce,R.get(Le.id)?We={id:R.get(Le.id),gap:Le.gap,direction:Le.direction}:We=Le,ae.has(ze)?ae.get(ze).push(We):ae.set(ze,[We]),ae.has(We.id)||ae.set(We.id,[]))})},"_loop8"),fe=!0,be=!1,Re=void 0;try{for(var Ge=k.keys()[Symbol.iterator](),je;!(fe=(je=Ge.next()).done);fe=!0){var Ae=je.value;Te(Ae)}}catch(ce){be=!0,Re=ce}finally{try{!fe&&Ge.return&&Ge.return()}finally{if(be)throw Re}}var we=v(se),Fe=v(ae),Pe=a(we),Be=a(Fe),qe=p(se),nt=p(ae),Qe=[],et=[];Pe.forEach(function(ce,Le){Qe[Le]=[],ce.forEach(function(ze){qe.get(ze).length==0&&Qe[Le].push(ze)})}),Be.forEach(function(ce,Le){et[Le]=[],ce.forEach(function(ze){nt.get(ze).length==0&&et[Le].push(ze)})});var Je=x(se,"horizontal",de,Q,Qe),tt=x(ae,"vertical",ee,pe,et),at=T(function(ce){$.get(ce)?$.get(ce).forEach(function(Le){E[c.get(Le)]=Je.get(ce)}):E[c.get(ce)]=Je.get(ce)},"_loop9"),Ke=!0,vt=!1,Et=void 0;try{for(var dt=Je.keys()[Symbol.iterator](),Nt;!(Ke=(Nt=dt.next()).done);Ke=!0){var ct=Nt.value;at(ct)}}catch(ce){vt=!0,Et=ce}finally{try{!Ke&&dt.return&&dt.return()}finally{if(vt)throw Et}}var zt=T(function(ce){J.get(ce)?J.get(ce).forEach(function(Le){_[c.get(Le)]=tt.get(ce)}):_[c.get(ce)]=tt.get(ce)},"_loop10"),ut=!0,Tt=!1,At=void 0;try{for(var gt=tt.keys()[Symbol.iterator](),wt;!(ut=(wt=gt.next()).done);ut=!0){var ct=wt.value;zt(ct)}}catch(ce){Tt=!0,At=ce}finally{try{!ut&&gt.return&&gt.return()}finally{if(Tt)throw At}}}()}for(var $e=0;$e<L.length;$e++){var le=L[$e];le.getChild()==null&&le.setCenter(E[c.get(le.id)],_[c.get(le.id)])}},i.exports=d},551:i=>{i.exports=C}},A={};function u(i){var r=A[i];if(r!==void 0)return r.exports;var e=A[i]={exports:{}};return G[i](e,e.exports,u),e.exports}T(u,"__webpack_require__");var s=u(45);return s})()})}),ar=yt((w,H)=>{T(function(C,G){typeof w=="object"&&typeof H=="object"?H.exports=G(Lt()):typeof define=="function"&&define.amd?define(["cose-base"],G):typeof w=="object"?w.cytoscapeFcose=G(Lt()):C.cytoscapeFcose=G(C.coseBase)},"webpackUniversalModuleDefinition")(w,function(C){return(()=>{var G={658:i=>{i.exports=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments.length,h=Array(e>1?e-1:0),n=1;n<e;n++)h[n-1]=arguments[n];return h.forEach(function(m){Object.keys(m).forEach(function(o){return r[o]=m[o]})}),r}},548:(i,r,e)=>{var h=function(){function o(t,d){var f=[],l=!0,N=!1,c=void 0;try{for(var E=t[Symbol.iterator](),_;!(l=(_=E.next()).done)&&(f.push(_.value),!(d&&f.length===d));l=!0);}catch(L){N=!0,c=L}finally{try{!l&&E.return&&E.return()}finally{if(N)throw c}}return f}return T(o,"sliceIterator"),function(t,d){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return o(t,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e(140).layoutBase.LinkedList,m={};m.getTopMostNodes=function(o){for(var t={},d=0;d<o.length;d++)t[o[d].id()]=!0;var f=o.filter(function(l,N){typeof l=="number"&&(l=N);for(var c=l.parent()[0];c!=null;){if(t[c.id()])return!1;c=c.parent()[0]}return!0});return f},m.connectComponents=function(o,t,d,f){var l=new n,N=new Set,c=[],E=void 0,_=void 0,L=void 0,X=!1,z=1,V=[],B=[],q=T(function(){var x=o.collection();B.push(x);var ne=d[0],a=o.collection();a.merge(ne).merge(ne.descendants().intersection(t)),c.push(ne),a.forEach(function(y){l.push(y),N.add(y),x.merge(y)});for(var v=T(function(){ne=l.shift();var y=o.collection();ne.neighborhood().nodes().forEach(function(M){t.intersection(ne.edgesWith(M)).length>0&&y.merge(M)});for(var g=0;g<y.length;g++){var D=y[g];if(E=d.intersection(D.union(D.ancestors())),E!=null&&!N.has(E[0])){var O=E.union(E.descendants());O.forEach(function(M){l.push(M),N.add(M),x.merge(M),d.has(M)&&c.push(M)})}}},"_loop2");l.length!=0;)v();if(x.forEach(function(y){t.intersection(y.connectedEdges()).forEach(function(g){x.has(g.source())&&x.has(g.target())&&x.merge(g)})}),c.length==d.length&&(X=!0),!X||X&&z>1){_=c[0],L=_.connectedEdges().length,c.forEach(function(y){y.connectedEdges().length<L&&(L=y.connectedEdges().length,_=y)}),V.push(_.id());var p=o.collection();p.merge(c[0]),c.forEach(function(y){p.merge(y)}),c=[],d=d.difference(p),z++}},"_loop");do q();while(!X);return f&&V.length>0&&f.set("dummy"+(f.size+1),V),B},m.relocateComponent=function(o,t,d){if(!d.fixedNodeConstraint){var f=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(d.quality=="draft"){var E=!0,_=!1,L=void 0;try{for(var X=t.nodeIndexes[Symbol.iterator](),z;!(E=(z=X.next()).done);E=!0){var V=z.value,B=h(V,2),q=B[0],x=B[1],ne=d.cy.getElementById(q);if(ne){var a=ne.boundingBox(),v=t.xCoords[x]-a.w/2,p=t.xCoords[x]+a.w/2,y=t.yCoords[x]-a.h/2,g=t.yCoords[x]+a.h/2;v<f&&(f=v),p>l&&(l=p),y<N&&(N=y),g>c&&(c=g)}}}catch(U){_=!0,L=U}finally{try{!E&&X.return&&X.return()}finally{if(_)throw L}}var D=o.x-(l+f)/2,O=o.y-(c+N)/2;t.xCoords=t.xCoords.map(function(U){return U+D}),t.yCoords=t.yCoords.map(function(U){return U+O})}else{Object.keys(t).forEach(function(U){var W=t[U],j=W.getRect().x,Y=W.getRect().x+W.getRect().width,K=W.getRect().y,P=W.getRect().y+W.getRect().height;j<f&&(f=j),Y>l&&(l=Y),K<N&&(N=K),P>c&&(c=P)});var M=o.x-(l+f)/2,k=o.y-(c+N)/2;Object.keys(t).forEach(function(U){var W=t[U];W.setCenter(W.getCenterX()+M,W.getCenterY()+k)})}}},m.calcBoundingBox=function(o,t,d,f){for(var l=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER,_=void 0,L=void 0,X=void 0,z=void 0,V=o.descendants().not(":parent"),B=V.length,q=0;q<B;q++){var x=V[q];_=t[f.get(x.id())]-x.width()/2,L=t[f.get(x.id())]+x.width()/2,X=d[f.get(x.id())]-x.height()/2,z=d[f.get(x.id())]+x.height()/2,l>_&&(l=_),N<L&&(N=L),c>X&&(c=X),E<z&&(E=z)}var ne={};return ne.topLeftX=l,ne.topLeftY=c,ne.width=N-l,ne.height=E-c,ne},m.calcParentsWithoutChildren=function(o,t){var d=o.collection();return t.nodes(":parent").forEach(function(f){var l=!1;f.children().forEach(function(N){N.css("display")!="none"&&(l=!0)}),l||d.merge(f)}),d},i.exports=m},816:(i,r,e)=>{var h=e(548),n=e(140).CoSELayout,m=e(140).CoSENode,o=e(140).layoutBase.PointD,t=e(140).layoutBase.DimensionD,d=e(140).layoutBase.LayoutConstants,f=e(140).layoutBase.FDLayoutConstants,l=e(140).CoSEConstants,N=T(function(c,E){var _=c.cy,L=c.eles,X=L.nodes(),z=L.edges(),V=void 0,B=void 0,q=void 0,x={};c.randomize&&(V=E.nodeIndexes,B=E.xCoords,q=E.yCoords);var ne=T(function(M){return typeof M=="function"},"isFn"),a=T(function(M,k){return ne(M)?M(k):M},"optFn"),v=h.calcParentsWithoutChildren(_,L),p=T(function M(k,U,W,j){for(var Y=U.length,K=0;K<Y;K++){var P=U[K],b=null;P.intersection(v).length==0&&(b=P.children());var F=void 0,Z=P.layoutDimensions({nodeDimensionsIncludeLabels:j.nodeDimensionsIncludeLabels});if(P.outerWidth()!=null&&P.outerHeight()!=null)if(j.randomize)if(!P.isParent())F=k.add(new m(W.graphManager,new o(B[V.get(P.id())]-Z.w/2,q[V.get(P.id())]-Z.h/2),new t(parseFloat(Z.w),parseFloat(Z.h))));else{var re=h.calcBoundingBox(P,B,q,V);P.intersection(v).length==0?F=k.add(new m(W.graphManager,new o(re.topLeftX,re.topLeftY),new t(re.width,re.height))):F=k.add(new m(W.graphManager,new o(re.topLeftX,re.topLeftY),new t(parseFloat(Z.w),parseFloat(Z.h))))}else F=k.add(new m(W.graphManager,new o(P.position("x")-Z.w/2,P.position("y")-Z.h/2),new t(parseFloat(Z.w),parseFloat(Z.h))));else F=k.add(new m(this.graphManager));if(F.id=P.data("id"),F.nodeRepulsion=a(j.nodeRepulsion,P),F.paddingLeft=parseInt(P.css("padding")),F.paddingTop=parseInt(P.css("padding")),F.paddingRight=parseInt(P.css("padding")),F.paddingBottom=parseInt(P.css("padding")),j.nodeDimensionsIncludeLabels&&(F.labelWidth=P.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,F.labelHeight=P.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,F.labelPosVertical=P.css("text-valign"),F.labelPosHorizontal=P.css("text-halign")),x[P.data("id")]=F,isNaN(F.rect.x)&&(F.rect.x=0),isNaN(F.rect.y)&&(F.rect.y=0),b!=null&&b.length>0){var ge=void 0;ge=W.getGraphManager().add(W.newGraph(),F),M(ge,b,W,j)}}},"processChildrenList"),y=T(function(M,k,U){for(var W=0,j=0,Y=0;Y<U.length;Y++){var K=U[Y],P=x[K.data("source")],b=x[K.data("target")];if(P&&b&&P!==b&&P.getEdgesBetween(b).length==0){var F=k.add(M.newEdge(),P,b);F.id=K.id(),F.idealLength=a(c.idealEdgeLength,K),F.edgeElasticity=a(c.edgeElasticity,K),W+=F.idealLength,j++}}c.idealEdgeLength!=null&&(j>0?l.DEFAULT_EDGE_LENGTH=f.DEFAULT_EDGE_LENGTH=W/j:ne(c.idealEdgeLength)?l.DEFAULT_EDGE_LENGTH=f.DEFAULT_EDGE_LENGTH=50:l.DEFAULT_EDGE_LENGTH=f.DEFAULT_EDGE_LENGTH=c.idealEdgeLength,l.MIN_REPULSION_DIST=f.MIN_REPULSION_DIST=f.DEFAULT_EDGE_LENGTH/10,l.DEFAULT_RADIAL_SEPARATION=f.DEFAULT_EDGE_LENGTH)},"processEdges"),g=T(function(M,k){k.fixedNodeConstraint&&(M.constraints.fixedNodeConstraint=k.fixedNodeConstraint),k.alignmentConstraint&&(M.constraints.alignmentConstraint=k.alignmentConstraint),k.relativePlacementConstraint&&(M.constraints.relativePlacementConstraint=k.relativePlacementConstraint)},"processConstraints");c.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=f.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.nestingFactor),c.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=f.DEFAULT_GRAVITY_STRENGTH=c.gravity),c.numIter!=null&&(l.MAX_ITERATIONS=f.MAX_ITERATIONS=c.numIter),c.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=f.DEFAULT_GRAVITY_RANGE_FACTOR=c.gravityRange),c.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=f.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.gravityCompound),c.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=f.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.gravityRangeCompound),c.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=f.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.initialEnergyOnIncremental),c.tilingCompareBy!=null&&(l.TILING_COMPARE_BY=c.tilingCompareBy),c.quality=="proof"?d.QUALITY=2:d.QUALITY=0,l.NODE_DIMENSIONS_INCLUDE_LABELS=f.NODE_DIMENSIONS_INCLUDE_LABELS=d.NODE_DIMENSIONS_INCLUDE_LABELS=c.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=f.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=!c.randomize,l.ANIMATE=f.ANIMATE=d.ANIMATE=c.animate,l.TILE=c.tile,l.TILING_PADDING_VERTICAL=typeof c.tilingPaddingVertical=="function"?c.tilingPaddingVertical.call():c.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof c.tilingPaddingHorizontal=="function"?c.tilingPaddingHorizontal.call():c.tilingPaddingHorizontal,l.DEFAULT_INCREMENTAL=f.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=!0,l.PURE_INCREMENTAL=!c.randomize,d.DEFAULT_UNIFORM_LEAF_NODE_SIZES=c.uniformNodeDimensions,c.step=="transformed"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!1),c.step=="enforced"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!1),c.step=="cose"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!0),c.step=="all"&&(c.randomize?l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!0),c.fixedNodeConstraint||c.alignmentConstraint||c.relativePlacementConstraint?l.TREE_REDUCTION_ON_INCREMENTAL=!1:l.TREE_REDUCTION_ON_INCREMENTAL=!0;var D=new n,O=D.newGraphManager();return p(O.addRoot(),h.getTopMostNodes(X),D,c),y(D,O,z),g(D,c),D.runLayout(),x},"coseLayout");i.exports={coseLayout:N}},212:(i,r,e)=>{var h=function(){function E(_,L){for(var X=0;X<L.length;X++){var z=L[X];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(_,z.key,z)}}return T(E,"defineProperties"),function(_,L,X){return L&&E(_.prototype,L),X&&E(_,X),_}}();function n(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}T(n,"_classCallCheck");var m=e(658),o=e(548),t=e(657),d=t.spectralLayout,f=e(816),l=f.coseLayout,N=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:T(function(E){return 4500},"nodeRepulsion"),idealEdgeLength:T(function(E){return 50},"idealEdgeLength"),edgeElasticity:T(function(E){return .45},"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:T(function(){},"ready"),stop:T(function(){},"stop")}),c=function(){function E(_){n(this,E),this.options=m({},N,_)}return T(E,"Layout"),h(E,[{key:"run",value:T(function(){var _=this,L=this.options,X=L.cy,z=L.eles,V=[],B=[],q=void 0,x=[];L.fixedNodeConstraint&&(!Array.isArray(L.fixedNodeConstraint)||L.fixedNodeConstraint.length==0)&&(L.fixedNodeConstraint=void 0),L.alignmentConstraint&&(L.alignmentConstraint.vertical&&(!Array.isArray(L.alignmentConstraint.vertical)||L.alignmentConstraint.vertical.length==0)&&(L.alignmentConstraint.vertical=void 0),L.alignmentConstraint.horizontal&&(!Array.isArray(L.alignmentConstraint.horizontal)||L.alignmentConstraint.horizontal.length==0)&&(L.alignmentConstraint.horizontal=void 0)),L.relativePlacementConstraint&&(!Array.isArray(L.relativePlacementConstraint)||L.relativePlacementConstraint.length==0)&&(L.relativePlacementConstraint=void 0);var ne=L.fixedNodeConstraint||L.alignmentConstraint||L.relativePlacementConstraint;ne&&(L.tile=!1,L.packComponents=!1);var a=void 0,v=!1;if(X.layoutUtilities&&L.packComponents&&(a=X.layoutUtilities("get"),a||(a=X.layoutUtilities()),v=!0),z.nodes().length>0)if(v){var p=o.getTopMostNodes(L.eles.nodes());if(q=o.connectComponents(X,L.eles,p),q.forEach(function(S){var ie=S.boundingBox();x.push({x:ie.x1+ie.w/2,y:ie.y1+ie.h/2})}),L.randomize&&q.forEach(function(S){L.eles=S,V.push(d(L))}),L.quality=="default"||L.quality=="proof"){var y=X.collection();if(L.tile){var g=new Map,D=[],O=[],M=0,k={nodeIndexes:g,xCoords:D,yCoords:O},U=[];if(q.forEach(function(S,ie){S.edges().length==0&&(S.nodes().forEach(function(he,ye){y.merge(S.nodes()[ye]),he.isParent()||(k.nodeIndexes.set(S.nodes()[ye].id(),M++),k.xCoords.push(S.nodes()[0].position().x),k.yCoords.push(S.nodes()[0].position().y))}),U.push(ie))}),y.length>1){var W=y.boundingBox();x.push({x:W.x1+W.w/2,y:W.y1+W.h/2}),q.push(y),V.push(k);for(var j=U.length-1;j>=0;j--)q.splice(U[j],1),V.splice(U[j],1),x.splice(U[j],1)}}q.forEach(function(S,ie){L.eles=S,B.push(l(L,V[ie])),o.relocateComponent(x[ie],B[ie],L)})}else q.forEach(function(S,ie){o.relocateComponent(x[ie],V[ie],L)});var Y=new Set;if(q.length>1){var K=[],P=z.filter(function(S){return S.css("display")=="none"});q.forEach(function(S,ie){var he=void 0;if(L.quality=="draft"&&(he=V[ie].nodeIndexes),S.nodes().not(P).length>0){var ye={};ye.edges=[],ye.nodes=[];var Ce=void 0;S.nodes().not(P).forEach(function(ve){if(L.quality=="draft")if(!ve.isParent())Ce=he.get(ve.id()),ye.nodes.push({x:V[ie].xCoords[Ce]-ve.boundingbox().w/2,y:V[ie].yCoords[Ce]-ve.boundingbox().h/2,width:ve.boundingbox().w,height:ve.boundingbox().h});else{var Ee=o.calcBoundingBox(ve,V[ie].xCoords,V[ie].yCoords,he);ye.nodes.push({x:Ee.topLeftX,y:Ee.topLeftY,width:Ee.width,height:Ee.height})}else B[ie][ve.id()]&&ye.nodes.push({x:B[ie][ve.id()].getLeft(),y:B[ie][ve.id()].getTop(),width:B[ie][ve.id()].getWidth(),height:B[ie][ve.id()].getHeight()})}),S.edges().forEach(function(ve){var Ee=ve.source(),xe=ve.target();if(Ee.css("display")!="none"&&xe.css("display")!="none")if(L.quality=="draft"){var Ve=he.get(Ee.id()),Ue=he.get(xe.id()),ke=[],Me=[];if(Ee.isParent()){var Xe=o.calcBoundingBox(Ee,V[ie].xCoords,V[ie].yCoords,he);ke.push(Xe.topLeftX+Xe.width/2),ke.push(Xe.topLeftY+Xe.height/2)}else ke.push(V[ie].xCoords[Ve]),ke.push(V[ie].yCoords[Ve]);if(xe.isParent()){var Ye=o.calcBoundingBox(xe,V[ie].xCoords,V[ie].yCoords,he);Me.push(Ye.topLeftX+Ye.width/2),Me.push(Ye.topLeftY+Ye.height/2)}else Me.push(V[ie].xCoords[Ue]),Me.push(V[ie].yCoords[Ue]);ye.edges.push({startX:ke[0],startY:ke[1],endX:Me[0],endY:Me[1]})}else B[ie][Ee.id()]&&B[ie][xe.id()]&&ye.edges.push({startX:B[ie][Ee.id()].getCenterX(),startY:B[ie][Ee.id()].getCenterY(),endX:B[ie][xe.id()].getCenterX(),endY:B[ie][xe.id()].getCenterY()})}),ye.nodes.length>0&&(K.push(ye),Y.add(ie))}});var b=a.packComponents(K,L.randomize).shifts;if(L.quality=="draft")V.forEach(function(S,ie){var he=S.xCoords.map(function(Ce){return Ce+b[ie].dx}),ye=S.yCoords.map(function(Ce){return Ce+b[ie].dy});S.xCoords=he,S.yCoords=ye});else{var F=0;Y.forEach(function(S){Object.keys(B[S]).forEach(function(ie){var he=B[S][ie];he.setCenter(he.getCenterX()+b[F].dx,he.getCenterY()+b[F].dy)}),F++})}}}else{var Z=L.eles.boundingBox();if(x.push({x:Z.x1+Z.w/2,y:Z.y1+Z.h/2}),L.randomize){var re=d(L);V.push(re)}L.quality=="default"||L.quality=="proof"?(B.push(l(L,V[0])),o.relocateComponent(x[0],B[0],L)):o.relocateComponent(x[0],V[0],L)}var ge=T(function(S,ie){if(L.quality=="default"||L.quality=="proof"){typeof S=="number"&&(S=ie);var he=void 0,ye=void 0,Ce=S.data("id");return B.forEach(function(Ee){Ce in Ee&&(he={x:Ee[Ce].getRect().getCenterX(),y:Ee[Ce].getRect().getCenterY()},ye=Ee[Ce])}),L.nodeDimensionsIncludeLabels&&(ye.labelWidth&&(ye.labelPosHorizontal=="left"?he.x+=ye.labelWidth/2:ye.labelPosHorizontal=="right"&&(he.x-=ye.labelWidth/2)),ye.labelHeight&&(ye.labelPosVertical=="top"?he.y+=ye.labelHeight/2:ye.labelPosVertical=="bottom"&&(he.y-=ye.labelHeight/2))),he==null&&(he={x:S.position("x"),y:S.position("y")}),{x:he.x,y:he.y}}else{var ve=void 0;return V.forEach(function(Ee){var xe=Ee.nodeIndexes.get(S.id());xe!=null&&(ve={x:Ee.xCoords[xe],y:Ee.yCoords[xe]})}),ve==null&&(ve={x:S.position("x"),y:S.position("y")}),{x:ve.x,y:ve.y}}},"getPositions");if(L.quality=="default"||L.quality=="proof"||L.randomize){var Ie=o.calcParentsWithoutChildren(X,z),De=z.filter(function(S){return S.css("display")=="none"});L.eles=z.not(De),z.nodes().not(":parent").not(De).layoutPositions(_,L,ge),Ie.length>0&&Ie.forEach(function(S){S.position(ge(S))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")},"run")}]),E}();i.exports=c},657:(i,r,e)=>{var h=e(548),n=e(140).layoutBase.Matrix,m=e(140).layoutBase.SVD,o=T(function(t){var d=t.cy,f=t.eles,l=f.nodes(),N=f.nodes(":parent"),c=new Map,E=new Map,_=new Map,L=[],X=[],z=[],V=[],B=[],q=[],x=[],ne=[],a=void 0,v=1e8,p=1e-9,y=t.piTol,g=t.samplingType,D=t.nodeSeparation,O=void 0,M=T(function(){for(var le=0,I=0,R=!1;I<O;){le=Math.floor(Math.random()*a),R=!1;for(var $=0;$<I;$++)if(V[$]==le){R=!0;break}if(!R)V[I]=le,I++;else continue}},"randomSampleCR"),k=T(function(le,I,R){for(var $=[],J=0,Q=0,pe=0,de=void 0,ee=[],ue=0,Ne=1,_e=0;_e<a;_e++)ee[_e]=v;for($[Q]=le,ee[le]=0;Q>=J;){pe=$[J++];for(var te=L[pe],Oe=0;Oe<te.length;Oe++)de=E.get(te[Oe]),ee[de]==v&&(ee[de]=ee[pe]+1,$[++Q]=de);q[pe][I]=ee[pe]*D}if(R){for(var oe=0;oe<a;oe++)q[oe][I]<B[oe]&&(B[oe]=q[oe][I]);for(var se=0;se<a;se++)B[se]>ue&&(ue=B[se],Ne=se)}return Ne},"BFS"),U=T(function(le){var I=void 0;if(le){I=Math.floor(Math.random()*a);for(var R=0;R<a;R++)B[R]=v;for(var $=0;$<O;$++)V[$]=I,I=k(I,$,le)}else{M();for(var J=0;J<O;J++)k(V[J],J,le,!1)}for(var Q=0;Q<a;Q++)for(var pe=0;pe<O;pe++)q[Q][pe]*=q[Q][pe];for(var de=0;de<O;de++)x[de]=[];for(var ee=0;ee<O;ee++)for(var ue=0;ue<O;ue++)x[ee][ue]=q[V[ue]][ee]},"allBFS"),W=T(function(){for(var le=m.svd(x),I=le.S,R=le.U,$=le.V,J=I[0]*I[0]*I[0],Q=[],pe=0;pe<O;pe++){Q[pe]=[];for(var de=0;de<O;de++)Q[pe][de]=0,pe==de&&(Q[pe][de]=I[pe]/(I[pe]*I[pe]+J/(I[pe]*I[pe])))}ne=n.multMat(n.multMat($,Q),n.transpose(R))},"sample"),j=T(function(){for(var le=void 0,I=void 0,R=[],$=[],J=[],Q=[],pe=0;pe<a;pe++)R[pe]=Math.random(),$[pe]=Math.random();R=n.normalize(R),$=n.normalize($);for(var de=0,ee=p,ue=p,Ne=void 0;;){de++;for(var _e=0;_e<a;_e++)J[_e]=R[_e];if(R=n.multGamma(n.multL(n.multGamma(J),q,ne)),le=n.dotProduct(J,R),R=n.normalize(R),ee=n.dotProduct(J,R),Ne=Math.abs(ee/ue),Ne<=1+y&&Ne>=1)break;ue=ee}for(var te=0;te<a;te++)J[te]=R[te];for(de=0,ue=p;;){de++;for(var Oe=0;Oe<a;Oe++)Q[Oe]=$[Oe];if(Q=n.minusOp(Q,n.multCons(J,n.dotProduct(J,Q))),$=n.multGamma(n.multL(n.multGamma(Q),q,ne)),I=n.dotProduct(Q,$),$=n.normalize($),ee=n.dotProduct(Q,$),Ne=Math.abs(ee/ue),Ne<=1+y&&Ne>=1)break;ue=ee}for(var oe=0;oe<a;oe++)Q[oe]=$[oe];X=n.multCons(J,Math.sqrt(Math.abs(le))),z=n.multCons(Q,Math.sqrt(Math.abs(I)))},"powerIteration");h.connectComponents(d,f,h.getTopMostNodes(l),c),N.forEach(function(le){h.connectComponents(d,f,h.getTopMostNodes(le.descendants().intersection(f)),c)});for(var Y=0,K=0;K<l.length;K++)l[K].isParent()||E.set(l[K].id(),Y++);var P=!0,b=!1,F=void 0;try{for(var Z=c.keys()[Symbol.iterator](),re;!(P=(re=Z.next()).done);P=!0){var ge=re.value;E.set(ge,Y++)}}catch(le){b=!0,F=le}finally{try{!P&&Z.return&&Z.return()}finally{if(b)throw F}}for(var Ie=0;Ie<E.size;Ie++)L[Ie]=[];N.forEach(function(le){for(var I=le.children().intersection(f);I.nodes(":childless").length==0;)I=I.nodes()[0].children().intersection(f);var R=0,$=I.nodes(":childless")[0].connectedEdges().length;I.nodes(":childless").forEach(function(J,Q){J.connectedEdges().length<$&&($=J.connectedEdges().length,R=Q)}),_.set(le.id(),I.nodes(":childless")[R].id())}),l.forEach(function(le){var I=void 0;le.isParent()?I=E.get(_.get(le.id())):I=E.get(le.id()),le.neighborhood().nodes().forEach(function(R){f.intersection(le.edgesWith(R)).length>0&&(R.isParent()?L[I].push(_.get(R.id())):L[I].push(R.id()))})});var De=T(function(le){var I=E.get(le),R=void 0;c.get(le).forEach(function($){d.getElementById($).isParent()?R=_.get($):R=$,L[I].push(R),L[E.get(R)].push(le)})},"_loop"),S=!0,ie=!1,he=void 0;try{for(var ye=c.keys()[Symbol.iterator](),Ce;!(S=(Ce=ye.next()).done);S=!0){var ve=Ce.value;De(ve)}}catch(le){ie=!0,he=le}finally{try{!S&&ye.return&&ye.return()}finally{if(ie)throw he}}a=E.size;var Ee=void 0;if(a>2){O=a<t.sampleSize?a:t.sampleSize;for(var xe=0;xe<a;xe++)q[xe]=[];for(var Ve=0;Ve<O;Ve++)ne[Ve]=[];return t.quality=="draft"||t.step=="all"?(U(g),W(),j(),Ee={nodeIndexes:E,xCoords:X,yCoords:z}):(E.forEach(function(le,I){X.push(d.getElementById(I).position("x")),z.push(d.getElementById(I).position("y"))}),Ee={nodeIndexes:E,xCoords:X,yCoords:z}),Ee}else{var Ue=E.keys(),ke=d.getElementById(Ue.next().value),Me=ke.position(),Xe=ke.outerWidth();if(X.push(Me.x),z.push(Me.y),a==2){var Ye=d.getElementById(Ue.next().value),$e=Ye.outerWidth();X.push(Me.x+Xe/2+$e/2+t.idealEdgeLength),z.push(Me.y)}return Ee={nodeIndexes:E,xCoords:X,yCoords:z},Ee}},"spectralLayout");i.exports={spectralLayout:o}},579:(i,r,e)=>{var h=e(212),n=T(function(m){m&&m("layout","fcose",h)},"register");typeof cytoscape<"u"&&n(cytoscape),i.exports=n},140:i=>{i.exports=C}},A={};function u(i){var r=A[i];if(r!==void 0)return r.exports;var e=A[i]={exports:{}};return G[i](e,e.exports,u),e.exports}T(u,"__webpack_require__");var s=u(579);return s})()})}),It={L:"left",R:"right",T:"top",B:"bottom"},Ct={L:T(w=>`${w},${w/2} 0,${w} 0,0`,"L"),R:T(w=>`0,${w/2} ${w},0 ${w},${w}`,"R"),T:T(w=>`0,0 ${w},0 ${w/2},${w}`,"T"),B:T(w=>`${w/2},0 ${w},${w} 0,${w}`,"B")},st={L:T((w,H)=>w-H+2,"L"),R:T((w,H)=>w-2,"R"),T:T((w,H)=>w-H+2,"T"),B:T((w,H)=>w-2,"B")},sr=T(function(w){return He(w)?w==="L"?"R":"L":w==="T"?"B":"T"},"getOppositeArchitectureDirection"),Ot=T(function(w){let H=w;return H==="L"||H==="R"||H==="T"||H==="B"},"isArchitectureDirection"),He=T(function(w){let H=w;return H==="L"||H==="R"},"isArchitectureDirectionX"),Ze=T(function(w){let H=w;return H==="T"||H==="B"},"isArchitectureDirectionY"),Dt=T(function(w,H){let C=He(w)&&Ze(H),G=Ze(w)&&He(H);return C||G},"isArchitectureDirectionXY"),hr=T(function(w){let H=w[0],C=w[1],G=He(H)&&Ze(C),A=Ze(H)&&He(C);return G||A},"isArchitecturePairXY"),lr=T(function(w){return w!=="LL"&&w!=="RR"&&w!=="TT"&&w!=="BB"},"isValidArchitectureDirectionPair"),pt=T(function(w,H){let C=`${w}${H}`;return lr(C)?C:void 0},"getArchitectureDirectionPair"),dr=T(function([w,H],C){let G=C[0],A=C[1];return He(G)?Ze(A)?[w+(G==="L"?-1:1),H+(A==="T"?1:-1)]:[w+(G==="L"?-1:1),H]:He(A)?[w+(A==="L"?1:-1),H+(G==="T"?1:-1)]:[w,H+(G==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),cr=T(function(w){return w==="LT"||w==="TL"?[1,1]:w==="BL"||w==="LB"?[1,-1]:w==="BR"||w==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),ur=T(function(w){return w.type==="service"},"isArchitectureService"),gr=T(function(w){return w.type==="junction"},"isArchitectureJunction"),bt=T(w=>w.data(),"edgeData"),it=T(w=>w.data(),"nodeData"),Rt=rr.architecture,me=new Ht(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:Rt,dataStructures:void 0,elements:{}})),fr=T(()=>{me.reset(),er()},"clear"),pr=T(function({id:w,icon:H,in:C,title:G,iconText:A}){if(me.records.registeredIds[w]!==void 0)throw new Error(`The service id [${w}] is already in use by another ${me.records.registeredIds[w]}`);if(C!==void 0){if(w===C)throw new Error(`The service [${w}] cannot be placed within itself`);if(me.records.registeredIds[C]===void 0)throw new Error(`The service [${w}]'s parent does not exist. Please make sure the parent is created before this service`);if(me.records.registeredIds[C]==="node")throw new Error(`The service [${w}]'s parent is not a group`)}me.records.registeredIds[w]="node",me.records.nodes[w]={id:w,type:"service",icon:H,iconText:A,title:G,edges:[],in:C}},"addService"),mr=T(()=>Object.values(me.records.nodes).filter(ur),"getServices"),yr=T(function({id:w,in:H}){me.records.registeredIds[w]="node",me.records.nodes[w]={id:w,type:"junction",edges:[],in:H}},"addJunction"),vr=T(()=>Object.values(me.records.nodes).filter(gr),"getJunctions"),Er=T(()=>Object.values(me.records.nodes),"getNodes"),Nr=T(w=>me.records.nodes[w],"getNode"),Tr=T(function({id:w,icon:H,in:C,title:G}){if(me.records.registeredIds[w]!==void 0)throw new Error(`The group id [${w}] is already in use by another ${me.records.registeredIds[w]}`);if(C!==void 0){if(w===C)throw new Error(`The group [${w}] cannot be placed within itself`);if(me.records.registeredIds[C]===void 0)throw new Error(`The group [${w}]'s parent does not exist. Please make sure the parent is created before this group`);if(me.records.registeredIds[C]==="node")throw new Error(`The group [${w}]'s parent is not a group`)}me.records.registeredIds[w]="group",me.records.groups[w]={id:w,icon:H,title:G,in:C}},"addGroup"),Ar=T(()=>Object.values(me.records.groups),"getGroups"),wr=T(function({lhsId:w,rhsId:H,lhsDir:C,rhsDir:G,lhsInto:A,rhsInto:u,lhsGroup:s,rhsGroup:i,title:r}){if(!Ot(C))throw new Error(`Invalid direction given for left hand side of edge ${w}--${H}. Expected (L,R,T,B) got ${C}`);if(!Ot(G))throw new Error(`Invalid direction given for right hand side of edge ${w}--${H}. Expected (L,R,T,B) got ${G}`);if(me.records.nodes[w]===void 0&&me.records.groups[w]===void 0)throw new Error(`The left-hand id [${w}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(me.records.nodes[H]===void 0&&me.records.groups[w]===void 0)throw new Error(`The right-hand id [${H}] does not yet exist. Please create the service/group before declaring an edge to it.`);let e=me.records.nodes[w].in,h=me.records.nodes[H].in;if(s&&e&&h&&e==h)throw new Error(`The left-hand id [${w}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(i&&e&&h&&e==h)throw new Error(`The right-hand id [${H}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let n={lhsId:w,lhsDir:C,lhsInto:A,lhsGroup:s,rhsId:H,rhsDir:G,rhsInto:u,rhsGroup:i,title:r};me.records.edges.push(n),me.records.nodes[w]&&me.records.nodes[H]&&(me.records.nodes[w].edges.push(me.records.edges[me.records.edges.length-1]),me.records.nodes[H].edges.push(me.records.edges[me.records.edges.length-1]))},"addEdge"),_r=T(()=>me.records.edges,"getEdges"),Lr=T(()=>{if(me.records.dataStructures===void 0){let w=Object.entries(me.records.nodes).reduce((s,[i,r])=>(s[i]=r.edges.reduce((e,h)=>{if(h.lhsId===i){let n=pt(h.lhsDir,h.rhsDir);n&&(e[n]=h.rhsId)}else{let n=pt(h.rhsDir,h.lhsDir);n&&(e[n]=h.lhsId)}return e},{}),s),{}),H=Object.keys(w)[0],C={[H]:1},G=Object.keys(w).reduce((s,i)=>i===H?s:{...s,[i]:1},{}),A=T(s=>{let i={[s]:[0,0]},r=[s];for(;r.length>0;){let e=r.shift();if(e){C[e]=1,delete G[e];let h=w[e],[n,m]=i[e];Object.entries(h).forEach(([o,t])=>{C[t]||(i[t]=dr([n,m],o),r.push(t))})}}return i},"BFS"),u=[A(H)];for(;Object.keys(G).length>0;)u.push(A(Object.keys(G)[0]));me.records.dataStructures={adjList:w,spatialMaps:u}}return me.records.dataStructures},"getDataStructures"),Ir=T((w,H)=>{me.records.elements[w]=H},"setElementForId"),Cr=T(w=>me.records.elements[w],"getElementById"),ht={clear:fr,setDiagramTitle:Jt,getDiagramTitle:Zt,setAccTitle:qt,getAccTitle:$t,setAccDescription:jt,getAccDescription:Wt,addService:pr,getServices:mr,addJunction:yr,getJunctions:vr,getNodes:Er,getNode:Nr,addGroup:Tr,getGroups:Ar,addEdge:wr,getEdges:_r,setElementForId:Ir,getElementById:Cr,getDataStructures:Lr};function Se(w){let H=lt().architecture;return H!=null&&H[w]?H[w]:Rt[w]}T(Se,"getConfigField");var Or=T((w,H)=>{Vt(w,H),w.groups.map(H.addGroup),w.services.map(C=>H.addService({...C,type:"service"})),w.junctions.map(C=>H.addJunction({...C,type:"junction"})),w.edges.map(H.addEdge)},"populateDb"),xr={parse:T(async w=>{let H=await Bt("architecture",w);Mt.debug(H),Or(H,ht)},"parse")},Mr=T(w=>`
  .edge {
    stroke-width: ${w.archEdgeWidth};
    stroke: ${w.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${w.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${w.archGroupBorderColor};
    stroke-width: ${w.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Dr=Mr,br=ir(ar()),rt=T(w=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${w}</g>`,"wrapIcon"),ot={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:rt('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:rt('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:rt('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:rt('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:rt('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:or,blank:{body:rt("")}}},Rr=T(async function(w,H){let C=Se("padding"),G=Se("iconSize"),A=G/2,u=G/6,s=u/2;await Promise.all(H.edges().map(async i=>{var z,V;let{source:r,sourceDir:e,sourceArrow:h,sourceGroup:n,target:m,targetDir:o,targetArrow:t,targetGroup:d,label:f}=bt(i),{x:l,y:N}=i[0].sourceEndpoint(),{x:c,y:E}=i[0].midpoint(),{x:_,y:L}=i[0].targetEndpoint(),X=C+4;if(n&&(He(e)?l+=e==="L"?-X:X:N+=e==="T"?-X:X+18),d&&(He(o)?_+=o==="L"?-X:X:L+=o==="T"?-X:X+18),!n&&((z=ht.getNode(r))==null?void 0:z.type)==="junction"&&(He(e)?l+=e==="L"?A:-A:N+=e==="T"?A:-A),!d&&((V=ht.getNode(m))==null?void 0:V.type)==="junction"&&(He(o)?_+=o==="L"?A:-A:L+=o==="T"?A:-A),i[0]._private.rscratch){let B=w.insert("g");if(B.insert("path").attr("d",`M ${l},${N} L ${c},${E} L${_},${L} `).attr("class","edge"),h){let q=He(e)?st[e](l,u):l-s,x=Ze(e)?st[e](N,u):N-s;B.insert("polygon").attr("points",Ct[e](u)).attr("transform",`translate(${q},${x})`).attr("class","arrow")}if(t){let q=He(o)?st[o](_,u):_-s,x=Ze(o)?st[o](L,u):L-s;B.insert("polygon").attr("points",Ct[o](u)).attr("transform",`translate(${q},${x})`).attr("class","arrow")}if(f){let q=Dt(e,o)?"XY":He(e)?"X":"Y",x=0;q==="X"?x=Math.abs(l-_):q==="Y"?x=Math.abs(N-L)/1.5:x=Math.abs(l-_)/2;let ne=B.append("g");if(await mt(ne,f,{useHtmlLabels:!1,width:x,classes:"architecture-service-label"},lt()),ne.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),q==="X")ne.attr("transform","translate("+c+", "+E+")");else if(q==="Y")ne.attr("transform","translate("+c+", "+E+") rotate(-90)");else if(q==="XY"){let a=pt(e,o);if(a&&hr(a)){let v=ne.node().getBoundingClientRect(),[p,y]=cr(a);ne.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*p*y*45})`);let g=ne.node().getBoundingClientRect();ne.attr("transform",`
                translate(${c}, ${E-v.height/2})
                translate(${p*g.width/2}, ${y*g.height/2})
                rotate(${-1*p*y*45}, 0, ${v.height/2})
              `)}}}}}))},"drawEdges"),Gr=T(async function(w,H){let C=Se("padding")*.75,G=Se("fontSize"),A=Se("iconSize")/2;await Promise.all(H.nodes().map(async u=>{let s=it(u);if(s.type==="group"){let{h:i,w:r,x1:e,y1:h}=u.boundingBox();w.append("rect").attr("x",e+A).attr("y",h+A).attr("width",r).attr("height",i).attr("class","node-bkg");let n=w.append("g"),m=e,o=h;if(s.icon){let t=n.append("g");t.html(`<g>${await ft(s.icon,{height:C,width:C,fallbackPrefix:ot.prefix})}</g>`),t.attr("transform","translate("+(m+A+1)+", "+(o+A+1)+")"),m+=C,o+=G/2-1-2}if(s.label){let t=n.append("g");await mt(t,s.label,{useHtmlLabels:!1,width:r,classes:"architecture-service-label"},lt()),t.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),t.attr("transform","translate("+(m+A+4)+", "+(o+A+2)+")")}}}))},"drawGroups"),Fr=T(async function(w,H,C){for(let G of C){let A=H.append("g"),u=Se("iconSize");if(G.title){let e=A.append("g");await mt(e,G.title,{useHtmlLabels:!1,width:u*1.5,classes:"architecture-service-label"},lt()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),e.attr("transform","translate("+u/2+", "+u+")")}let s=A.append("g");if(G.icon)s.html(`<g>${await ft(G.icon,{height:u,width:u,fallbackPrefix:ot.prefix})}</g>`);else if(G.iconText){s.html(`<g>${await ft("blank",{height:u,width:u,fallbackPrefix:ot.prefix})}</g>`);let e=s.append("g").append("foreignObject").attr("width",u).attr("height",u).append("div").attr("class","node-icon-text").attr("style",`height: ${u}px;`).append("div").html(G.iconText),h=parseInt(window.getComputedStyle(e.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;e.attr("style",`-webkit-line-clamp: ${Math.floor((u-2)/h)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+G.id).attr("d",`M0 ${u} v${-u} q0,-5 5,-5 h${u} q5,0 5,5 v${u} H0 Z`);A.attr("class","architecture-service");let{width:i,height:r}=A._groups[0][0].getBBox();G.width=i,G.height=r,w.setElementForId(G.id,A)}return 0},"drawServices"),Sr=T(function(w,H,C){C.forEach(G=>{let A=H.append("g"),u=Se("iconSize");A.append("g").append("rect").attr("id","node-"+G.id).attr("fill-opacity","0").attr("width",u).attr("height",u),A.attr("class","architecture-junction");let{width:s,height:i}=A._groups[0][0].getBBox();A.width=s,A.height=i,w.setElementForId(G.id,A)})},"drawJunctions");nr([{name:ot.prefix,icons:ot}]);xt.use(br.default);function Gt(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"service",id:C.id,icon:C.icon,label:C.title,parent:C.in,width:Se("iconSize"),height:Se("iconSize")},classes:"node-service"})})}T(Gt,"addServices");function Ft(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"junction",id:C.id,parent:C.in,width:Se("iconSize"),height:Se("iconSize")},classes:"node-junction"})})}T(Ft,"addJunctions");function St(w,H){H.nodes().map(C=>{let G=it(C);G.type!=="group"&&(G.x=C.position().x,G.y=C.position().y,w.getElementById(G.id).attr("transform","translate("+(G.x||0)+","+(G.y||0)+")"))})}T(St,"positionNodes");function Pt(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"group",id:C.id,icon:C.icon,label:C.title,parent:C.in},classes:"node-group"})})}T(Pt,"addGroups");function kt(w,H){w.forEach(C=>{let{lhsId:G,rhsId:A,lhsInto:u,lhsGroup:s,rhsInto:i,lhsDir:r,rhsDir:e,rhsGroup:h,title:n}=C,m=Dt(C.lhsDir,C.rhsDir)?"segments":"straight",o={id:`${G}-${A}`,label:n,source:G,sourceDir:r,sourceArrow:u,sourceGroup:s,sourceEndpoint:r==="L"?"0 50%":r==="R"?"100% 50%":r==="T"?"50% 0":"50% 100%",target:A,targetDir:e,targetArrow:i,targetGroup:h,targetEndpoint:e==="L"?"0 50%":e==="R"?"100% 50%":e==="T"?"50% 0":"50% 100%"};H.add({group:"edges",data:o,classes:m})})}T(kt,"addEdges");function Ut(w){let H=w.map(A=>{let u={},s={};return Object.entries(A).forEach(([i,[r,e]])=>{u[e]||(u[e]=[]),s[r]||(s[r]=[]),u[e].push(i),s[r].push(i)}),{horiz:Object.values(u).filter(i=>i.length>1),vert:Object.values(s).filter(i=>i.length>1)}}),[C,G]=H.reduce(([A,u],{horiz:s,vert:i})=>[[...A,...s],[...u,...i]],[[],[]]);return{horizontal:C,vertical:G}}T(Ut,"getAlignments");function Xt(w){let H=[],C=T(A=>`${A[0]},${A[1]}`,"posToStr"),G=T(A=>A.split(",").map(u=>parseInt(u)),"strToPos");return w.forEach(A=>{let u=Object.fromEntries(Object.entries(A).map(([e,h])=>[C(h),e])),s=[C([0,0])],i={},r={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){let e=s.shift();if(e){i[e]=1;let h=u[e];if(h){let n=G(e);Object.entries(r).forEach(([m,o])=>{let t=C([n[0]+o[0],n[1]+o[1]]),d=u[t];d&&!i[t]&&(s.push(t),H.push({[It[m]]:d,[It[sr(m)]]:h,gap:1.5*Se("iconSize")}))})}}}}),H}T(Xt,"getRelativeConstraints");function Yt(w,H,C,G,{spatialMaps:A}){return new Promise(u=>{let s=tr("body").append("div").attr("id","cy").attr("style","display:none"),i=xt({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${Se("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${Se("padding")}px`}}]});s.remove(),Pt(C,i),Gt(w,i),Ft(H,i),kt(G,i);let r=Ut(A),e=Xt(A),h=i.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(n){let[m,o]=n.connectedNodes(),{parent:t}=it(m),{parent:d}=it(o);return t===d?1.5*Se("iconSize"):.5*Se("iconSize")},edgeElasticity(n){let[m,o]=n.connectedNodes(),{parent:t}=it(m),{parent:d}=it(o);return t===d?.45:.001},alignmentConstraint:r,relativePlacementConstraint:e});h.one("layoutstop",()=>{var m;function n(o,t,d,f){let l,N,{x:c,y:E}=o,{x:_,y:L}=t;N=(f-E+(c-d)*(E-L)/(c-_))/Math.sqrt(1+Math.pow((E-L)/(c-_),2)),l=Math.sqrt(Math.pow(f-E,2)+Math.pow(d-c,2)-Math.pow(N,2));let X=Math.sqrt(Math.pow(_-c,2)+Math.pow(L-E,2));l=l/X;let z=(_-c)*(f-E)-(L-E)*(d-c);switch(!0){case z>=0:z=1;break;case z<0:z=-1;break}let V=(_-c)*(d-c)+(L-E)*(f-E);switch(!0){case V>=0:V=1;break;case V<0:V=-1;break}return N=Math.abs(N)*z,l=l*V,{distances:N,weights:l}}T(n,"getSegmentWeights"),i.startBatch();for(let o of Object.values(i.edges()))if((m=o.data)!=null&&m.call(o)){let{x:t,y:d}=o.source().position(),{x:f,y:l}=o.target().position();if(t!==f&&d!==l){let N=o.sourceEndpoint(),c=o.targetEndpoint(),{sourceDir:E}=bt(o),[_,L]=Ze(E)?[N.x,c.y]:[c.x,N.y],{weights:X,distances:z}=n(N,c,_,L);o.style("segment-distances",z),o.style("segment-weights",X)}}i.endBatch(),h.run()}),h.run(),i.ready(n=>{Mt.info("Ready",n),u(i)})})}T(Yt,"layoutArchitecture");var Pr=T(async(w,H,C,G)=>{let A=G.db,u=A.getServices(),s=A.getJunctions(),i=A.getGroups(),r=A.getEdges(),e=A.getDataStructures(),h=Kt(H),n=h.append("g");n.attr("class","architecture-edges");let m=h.append("g");m.attr("class","architecture-services");let o=h.append("g");o.attr("class","architecture-groups"),await Fr(A,m,u),Sr(A,m,s);let t=await Yt(u,s,i,r,e);await Rr(n,t),await Gr(o,t),St(A,t),Qt(void 0,h,Se("padding"),Se("useMaxWidth"))},"draw"),kr={draw:Pr},Wr={parser:xr,db:ht,renderer:kr,styles:Dr};export{Wr as diagram};
